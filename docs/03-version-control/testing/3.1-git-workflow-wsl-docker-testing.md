---
title: "3.1 Git Workflow Testing in WSL Docker Environment"
description: "Comprehensive testing framework for MLOps Git workflow in WSL + Docker environment"
category: "Version Control Testing"
stage: 3
substage: 1
difficulty: "ì¤‘ê¸‰"
duration: "1-2ì‹œê°„"
prerequisites:
  - "WSL2 Ubuntu í™˜ê²½"
  - "Docker Desktop ì„¤ì¹˜"
  - "3.1 Git ì›Œí¬í”Œë¡œìš° êµ¬í˜„ ì™„ë£Œ"
  - "MLOps ë¸Œëœì¹˜ ìë™í™” ë„êµ¬ ì„¤ì¹˜"
technologies:
  - pytest
  - bash
  - Git
  - Docker
  - WSL2
  - Python
test_scope:
  - "WSL Git í™˜ê²½ ì„¤ì •"
  - "MLOps ë¸Œëœì¹˜ ìƒì„± ë„êµ¬"
  - "ë¸Œëœì¹˜ ë„¤ì´ë° ê²€ì¦"
  - "Docker ì›Œí¬í”Œë¡œìš° í†µí•©"
  - "Pre-push Hook ë³´í˜¸"
author: "MLOps Testing Team"
created: "2025-01-06"
updated: "2025-01-06"
version: "1.0"
---

# 3.1 Git Workflow Testing in WSL Docker Environment

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ê°œìš”

**ëª©í‘œ**: WSL + Docker í™˜ê²½ì—ì„œ MLOps Git ì›Œí¬í”Œë¡œìš°ì˜ ì•ˆì •ì„±ê³¼ ê¸°ëŠ¥ì„± ê²€ì¦  
**ë²”ìœ„**: Git ì„¤ì •, ë¸Œëœì¹˜ ê´€ë¦¬, ìë™í™” ë„êµ¬, Docker í†µí•©  
**í™˜ê²½**: WSL Ubuntu + Docker + GitHub

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½ ì¤€ë¹„

### í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •

```bash
# WSL Ubuntu í™˜ê²½ì—ì„œ ì‹¤í–‰
cd /mnt/c/dev/movie-mlops

# í…ŒìŠ¤íŠ¸ ì „ìš© ë¸Œëœì¹˜ ìƒì„±
git checkout -b testing/git-workflow-validation

# í…ŒìŠ¤íŠ¸ ë””ë ‰í„°ë¦¬ êµ¬ì¡° í™•ì¸
mkdir -p tests/{unit,integration,e2e}
mkdir -p tests/fixtures/git-workflow
```

### í…ŒìŠ¤íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# Python í…ŒìŠ¤íŠ¸ ë„êµ¬ ì„¤ì¹˜
pip install pytest pytest-cov pytest-mock
pip install gitpython dulwich

# í…ŒìŠ¤íŠ¸ìš© í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export TEST_MODE=true
export MLOPS_PROJECT_ROOT="/mnt/c/dev/movie-mlops"
export WSL_DISTRO_NAME="Ubuntu"
```

---

## ğŸ”§ Unit Tests - WSL Git í™˜ê²½ ì„¤ì •

### 3.1.1 WSL Git ì„¤ì • í…ŒìŠ¤íŠ¸

```python
# tests/unit/test_3_1_wsl_git_config.py
"""
WSL í™˜ê²½ Git ì„¤ì • ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
"""
import subprocess
import pytest
import os
from pathlib import Path

class TestWSLGitConfig:
    """WSL Git ì„¤ì • í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤"""
    
    def setup_method(self):
        """í…ŒìŠ¤íŠ¸ ì „ ì„¤ì •"""
        self.project_root = Path(os.environ.get('MLOPS_PROJECT_ROOT', '/mnt/c/dev/movie-mlops'))
        
    def test_wsl_git_core_settings(self):
        """WSL íŠ¹í™” Git í•µì‹¬ ì„¤ì • í…ŒìŠ¤íŠ¸"""
        
        # WSL íŠ¹í™” ì„¤ì • í™•ì¸
        configs_to_test = {
            'core.autocrlf': 'input',
            'core.filemode': 'false', 
            'core.ignorecase': 'false',
            'pull.rebase': 'false',
            'push.default': 'simple'
        }
        
        for config_key, expected_value in configs_to_test.items():
            result = subprocess.run(
                ['git', 'config', '--global', config_key],
                capture_output=True, text=True
            )
            assert result.returncode == 0, f"Git config {config_key} not set"
            assert result.stdout.strip() == expected_value, \
                f"Git config {config_key} expected {expected_value}, got {result.stdout.strip()}"
    
    def test_wsl_git_performance_settings(self):
        """WSL Git ì„±ëŠ¥ ìµœì í™” ì„¤ì • í…ŒìŠ¤íŠ¸"""
        
        performance_configs = {
            'core.preloadindex': 'true',
            'core.fscache': 'true',
            'gc.auto': '256'
        }
        
        for config_key, expected_value in performance_configs.items():
            result = subprocess.run(
                ['git', 'config', '--global', config_key],
                capture_output=True, text=True
            )
            assert result.returncode == 0, f"Performance config {config_key} not set"
            assert result.stdout.strip() == expected_value
    
    def test_mlops_git_aliases(self):
        """MLOps íŠ¹í™” Git ë³„ì¹­ í…ŒìŠ¤íŠ¸"""
        
        expected_aliases = [
            'mlops-stage',
            'mlops-exp', 
            'mlops-bugfix',
            'mlops-status'
        ]
        
        for alias in expected_aliases:
            result = subprocess.run(
                ['git', 'config', '--global', f'alias.{alias}'],
                capture_output=True, text=True
            )
            assert result.returncode == 0, f"MLOps alias {alias} not configured"
            assert result.stdout.strip(), f"MLOps alias {alias} is empty"
    
    def test_git_user_configuration(self):
        """Git ì‚¬ìš©ì ì„¤ì • í…ŒìŠ¤íŠ¸"""
        
        # ì‚¬ìš©ì ì´ë¦„ í™•ì¸
        result = subprocess.run(
            ['git', 'config', '--global', 'user.name'],
            capture_output=True, text=True
        )
        assert result.returncode == 0, "Git user.name not configured"
        assert result.stdout.strip(), "Git user.name is empty"
        
        # ì‚¬ìš©ì ì´ë©”ì¼ í™•ì¸
        result = subprocess.run(
            ['git', 'config', '--global', 'user.email'],
            capture_output=True, text=True
        )
        assert result.returncode == 0, "Git user.email not configured"
        assert "@" in result.stdout.strip(), "Git user.email format invalid"
    
    def test_default_branch_setting(self):
        """ê¸°ë³¸ ë¸Œëœì¹˜ ì„¤ì • í…ŒìŠ¤íŠ¸"""
        
        result = subprocess.run(
            ['git', 'config', '--global', 'init.defaultBranch'],
            capture_output=True, text=True
        )
        assert result.returncode == 0, "Default branch not configured"
        assert result.stdout.strip() == 'main', "Default branch should be 'main'"
```

### 3.1.2 ë¸Œëœì¹˜ ë„¤ì´ë° ê²€ì¦ í…ŒìŠ¤íŠ¸

```python
# tests/unit/test_3_1_branch_naming.py
"""
MLOps ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™ ê²€ì¦ í…ŒìŠ¤íŠ¸
"""
import subprocess
import pytest
from pathlib import Path
import os

class TestBranchNaming:
    """ë¸Œëœì¹˜ ë„¤ì´ë° ê²€ì¦ í…ŒìŠ¤íŠ¸"""
    
    def setup_method(self):
        """í…ŒìŠ¤íŠ¸ ì „ ì„¤ì •"""
        self.project_root = Path(os.environ.get('MLOPS_PROJECT_ROOT', '/mnt/c/dev/movie-mlops'))
        self.validator_script = self.project_root / "scripts/validate_branch_name.sh"
        
        # ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ì¡´ì¬ í™•ì¸
        assert self.validator_script.exists(), "Branch validation script not found"
        assert os.access(self.validator_script, os.X_OK), "Branch validation script not executable"
    
    @pytest.mark.parametrize("branch_name,should_pass", [
        # MLOps 9ë‹¨ê³„ ë¸Œëœì¹˜ (í†µê³¼í•´ì•¼ í•¨)
        ("feature/stage1-data-pipeline", True),
        ("feature/stage2-feature-store", True),
        ("feature/stage3-version-control", True),
        ("feature/stage9-event-driven", True),
        
        # ì‹¤í—˜ ë¸Œëœì¹˜ (í†µê³¼í•´ì•¼ í•¨)
        ("experiment/hyperparameter-tuning", True),
        ("experiment/new-ml-algorithm", True),
        ("experiment/feature-engineering", True),
        
        # ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜ (í†µê³¼í•´ì•¼ í•¨)
        ("bugfix/123-memory-leak", True),
        ("bugfix/456-api-timeout", True),
        
        # ê¸´ê¸‰ ìˆ˜ì • ë¸Œëœì¹˜ (í†µê³¼í•´ì•¼ í•¨)
        ("hotfix/789-security-patch", True),
        ("hotfix/101-data-corruption", True),
        
        # ë¬¸ì„œí™” ë¸Œëœì¹˜ (í†µê³¼í•´ì•¼ í•¨)
        ("docs/api-documentation", True),
        ("docs/deployment-guide", True),
        
        # ì˜ëª»ëœ ë¸Œëœì¹˜ (ì‹¤íŒ¨í•´ì•¼ í•¨)
        ("Feature/Stage1-DataPipeline", False),  # ëŒ€ë¬¸ì
        ("feature/stage10-invalid", False),      # ì˜ëª»ëœ ë‹¨ê³„
        ("random-branch", False),               # íƒ€ì… ì—†ìŒ
        ("feature/stage1", False),              # ì„¤ëª… ì—†ìŒ
        ("main", False),                        # ë³´í˜¸ëœ ë¸Œëœì¹˜
        ("master", False),                      # êµ¬ ê¸°ë³¸ ë¸Œëœì¹˜
        ("develop", False),                     # êµ¬ ê°œë°œ ë¸Œëœì¹˜
    ])
    def test_branch_naming_validation(self, branch_name, should_pass):
        """ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™ ê²€ì¦ í…ŒìŠ¤íŠ¸"""
        
        result = subprocess.run(
            [str(self.validator_script), branch_name],
            capture_output=True, text=True, cwd=self.project_root
        )
        
        if should_pass:
            assert result.returncode == 0, \
                f"Valid branch name '{branch_name}' should pass validation. Error: {result.stderr}"
        else:
            assert result.returncode != 0, \
                f"Invalid branch name '{branch_name}' should fail validation"
    
    def test_branch_naming_help_message(self):
        """ë¸Œëœì¹˜ ë„¤ì´ë° ë„ì›€ë§ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸"""
        
        # ì˜ëª»ëœ ë¸Œëœì¹˜ëª…ìœ¼ë¡œ ë„ì›€ë§ í™•ì¸
        result = subprocess.run(
            [str(self.validator_script), "invalid-branch"],
            capture_output=True, text=True, cwd=self.project_root
        )
        
        assert result.returncode != 0
        assert "MLOps ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™" in result.stdout
        assert "feature/stage" in result.stdout
        assert "experiment/" in result.stdout
        assert "bugfix/" in result.stdout
```

---

## ğŸ”Œ Integration Tests - MLOps ë¸Œëœì¹˜ ë„êµ¬

### 3.1.3 MLOps ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ í…ŒìŠ¤íŠ¸

```python
# tests/integration/test_3_1_mlops_branch_creator.py
"""
MLOps ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ í†µí•© í…ŒìŠ¤íŠ¸
"""
import subprocess
import pytest
import tempfile
import shutil
from pathlib import Path
import os
import git

class TestMLOpsBranchCreator:
    """MLOps ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ í†µí•© í…ŒìŠ¤íŠ¸"""
    
    def setup_method(self):
        """í…ŒìŠ¤íŠ¸ ì „ ì„¤ì •"""
        self.project_root = Path(os.environ.get('MLOPS_PROJECT_ROOT', '/mnt/c/dev/movie-mlops'))
        self.creator_script = self.project_root / "scripts/create_mlops_branch.py"
        
        # Git ì €ì¥ì†Œ í™•ì¸
        self.repo = git.Repo(self.project_root)
        self.original_branch = self.repo.active_branch.name
        
        # í…ŒìŠ¤íŠ¸ ì¤‘ ìƒì„±ëœ ë¸Œëœì¹˜ ì¶”ì 
        self.test_branches = []
        
        # ìŠ¤í¬ë¦½íŠ¸ ì¡´ì¬ í™•ì¸
        assert self.creator_script.exists(), "MLOps branch creator script not found"
    
    def teardown_method(self):
        """í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬"""
        # ì›ë˜ ë¸Œëœì¹˜ë¡œ ë³µê·€
        try:
            self.repo.git.checkout(self.original_branch)
        except:
            pass
            
        # í…ŒìŠ¤íŠ¸ ë¸Œëœì¹˜ ì‚­ì œ
        for branch_name in self.test_branches:
            try:
                self.repo.git.branch('-D', branch_name)
            except:
                pass
    
    def test_mlops_stage_branch_creation(self):
        """MLOps ë‹¨ê³„ë³„ ë¸Œëœì¹˜ ìƒì„± í…ŒìŠ¤íŠ¸"""
        
        stage_num = 4
        description = "test-cicd-pipeline"
        expected_branch = f"feature/stage{stage_num}-{description}"
        
        # ë¸Œëœì¹˜ ìƒì„±
        result = subprocess.run([
            'python', str(self.creator_script), 'stage', 
            str(stage_num), description
        ], capture_output=True, text=True, cwd=self.project_root)
        
        assert result.returncode == 0, f"Branch creation failed: {result.stderr}"
        self.test_branches.append(expected_branch)
        
        # ë¸Œëœì¹˜ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
        branches = [b.name for b in self.repo.branches]
        assert expected_branch in branches, f"Branch {expected_branch} not created"
        
        # í˜„ì¬ ë¸Œëœì¹˜ê°€ ìƒˆë¡œ ìƒì„±ëœ ë¸Œëœì¹˜ì¸ì§€ í™•ì¸
        current_branch = self.repo.active_branch.name
        assert current_branch == expected_branch, f"Not switched to new branch {expected_branch}"
        
        # ë””ë ‰í„°ë¦¬ êµ¬ì¡° ìƒì„± í™•ì¸
        stage_dir = self.project_root / f"docs/{stage_num:02d}-cicd-pipeline"
        assert stage_dir.exists(), f"Stage directory {stage_dir} not created"
        
        impl_dir = stage_dir / "implementation"
        assert impl_dir.exists(), f"Implementation directory {impl_dir} not created"
        
        readme_file = stage_dir / "README.md"
        assert readme_file.exists(), f"README file {readme_file} not created"
    
    def test_experiment_branch_creation(self):
        """ì‹¤í—˜ ë¸Œëœì¹˜ ìƒì„± í…ŒìŠ¤íŠ¸"""
        
        description = "test-hyperparameter-optimization"
        expected_branch = f"experiment/{description}"
        
        # ë¸Œëœì¹˜ ìƒì„±
        result = subprocess.run([
            'python', str(self.creator_script), 'experiment', description
        ], capture_output=True, text=True, cwd=self.project_root)
        
        assert result.returncode == 0, f"Experiment branch creation failed: {result.stderr}"
        self.test_branches.append(expected_branch)
        
        # ë¸Œëœì¹˜ í™•ì¸
        branches = [b.name for b in self.repo.branches]
        assert expected_branch in branches
        
        # ì‹¤í—˜ ë””ë ‰í„°ë¦¬ ìƒì„± í™•ì¸
        exp_dir = self.project_root / "experiments" / description
        assert exp_dir.exists(), f"Experiment directory {exp_dir} not created"
        
        exp_file = exp_dir / f"{description}-experiment.md"
        assert exp_file.exists(), f"Experiment file {exp_file} not created"
    
    def test_bugfix_branch_creation(self):
        """ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜ ìƒì„± í…ŒìŠ¤íŠ¸"""
        
        issue_number = "999"
        description = "test-memory-leak"
        expected_branch = f"bugfix/{issue_number}-{description}"
        
        # ë¸Œëœì¹˜ ìƒì„±
        result = subprocess.run([
            'python', str(self.creator_script), 'bugfix', 
            issue_number, description
        ], capture_output=True, text=True, cwd=self.project_root)
        
        assert result.returncode == 0, f"Bugfix branch creation failed: {result.stderr}"
        self.test_branches.append(expected_branch)
        
        # ë¸Œëœì¹˜ í™•ì¸
        branches = [b.name for b in self.repo.branches]
        assert expected_branch in branches
    
    def test_invalid_stage_number(self):
        """ì˜ëª»ëœ ë‹¨ê³„ ë²ˆí˜¸ í…ŒìŠ¤íŠ¸"""
        
        # 0ë‹¨ê³„ (ë¬´íš¨)
        result = subprocess.run([
            'python', str(self.creator_script), 'stage', '0', 'invalid'
        ], capture_output=True, text=True, cwd=self.project_root)
        assert result.returncode != 0, "Invalid stage 0 should fail"
        
        # 10ë‹¨ê³„ (ë¬´íš¨)
        result = subprocess.run([
            'python', str(self.creator_script), 'stage', '10', 'invalid'
        ], capture_output=True, text=True, cwd=self.project_root)
        assert result.returncode != 0, "Invalid stage 10 should fail"
    
    def test_git_alias_integration(self):
        """Git ë³„ì¹­ì„ í†µí•œ ë¸Œëœì¹˜ ìƒì„± í…ŒìŠ¤íŠ¸"""
        
        # Git ë³„ì¹­ì´ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
        result = subprocess.run([
            'git', 'config', '--global', 'alias.mlops-stage'
        ], capture_output=True, text=True)
        
        if result.returncode == 0:
            # ë³„ì¹­ì„ í†µí•œ ë¸Œëœì¹˜ ìƒì„± ì‹œë„
            stage_num = 5
            description = "test-model-serving"
            expected_branch = f"feature/stage{stage_num}-{description}"
            
            # ë³„ì¹­ ì‹¤í–‰
            result = subprocess.run([
                'git', 'mlops-stage', str(stage_num), description
            ], capture_output=True, text=True, cwd=self.project_root)
            
            # ì„±ê³µí•˜ë©´ ë¸Œëœì¹˜ ì •ë¦¬ì— ì¶”ê°€
            if result.returncode == 0:
                self.test_branches.append(expected_branch)
                
                # ë¸Œëœì¹˜ ìƒì„± í™•ì¸
                branches = [b.name for b in self.repo.branches]
                assert expected_branch in branches
```

---

## ğŸ³ Docker Integration Tests

### 3.1.4 Docker ì›Œí¬í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸

```bash
# tests/integration/test_3_1_docker_workflow.sh
#!/bin/bash
# Docker ì›Œí¬í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸

set -e

echo "ğŸ³ Docker ì›Œí¬í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸ ì‹œì‘..."

# í…ŒìŠ¤íŠ¸ í™˜ê²½ ë³€ìˆ˜
TEST_PROJECT_ROOT="/mnt/c/dev/movie-mlops"
TEST_COMPOSE_FILE="docker-compose.git-workflow.yml"

cd "$TEST_PROJECT_ROOT"

# 1. Docker Compose íŒŒì¼ ì¡´ì¬ í™•ì¸
test_docker_compose_file() {
    echo "ğŸ“‹ 1. Docker Compose íŒŒì¼ í™•ì¸..."
    
    if [ ! -f "$TEST_COMPOSE_FILE" ]; then
        echo "âŒ Docker Compose íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤: $TEST_COMPOSE_FILE"
        exit 1
    fi
    
    echo "âœ… Docker Compose íŒŒì¼ ì¡´ì¬ í™•ì¸"
}

# 2. Docker ë„¤íŠ¸ì›Œí¬ í™•ì¸
test_docker_network() {
    echo "ğŸŒ 2. Docker ë„¤íŠ¸ì›Œí¬ í™•ì¸..."
    
    if ! docker network ls | grep -q "mlops-network"; then
        echo "âš ï¸ MLOps ë„¤íŠ¸ì›Œí¬ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìƒì„± ì¤‘..."
        docker network create mlops-network
    fi
    
    echo "âœ… Docker ë„¤íŠ¸ì›Œí¬ í™•ì¸ ì™„ë£Œ"
}

# 3. Git ì›Œí¬í”Œë¡œìš° ì»¨í…Œì´ë„ˆ ë¹Œë“œ í…ŒìŠ¤íŠ¸
test_docker_build() {
    echo "ğŸ”¨ 3. Docker ì»¨í…Œì´ë„ˆ ë¹Œë“œ í…ŒìŠ¤íŠ¸..."
    
    # ì»¨í…Œì´ë„ˆ ë¹Œë“œ (ìºì‹œ ì—†ì´)
    if docker compose -f "$TEST_COMPOSE_FILE" build --no-cache mlops-git-workflow 2>/dev/null; then
        echo "âœ… Git ì›Œí¬í”Œë¡œìš° ì»¨í…Œì´ë„ˆ ë¹Œë“œ ì„±ê³µ"
    else
        echo "âš ï¸ ì»¨í…Œì´ë„ˆ ë¹Œë“œ ê±´ë„ˆëœ€ (Dockerfile.dev í™•ì¸ í•„ìš”)"
    fi
}

# 4. ì»¨í…Œì´ë„ˆ ì‹œì‘ ë° Git ëª…ë ¹ì–´ í…ŒìŠ¤íŠ¸
test_docker_git_integration() {
    echo "ğŸ”§ 4. Docker-Git í†µí•© í…ŒìŠ¤íŠ¸..."
    
    # ì»¨í…Œì´ë„ˆ ì‹œì‘
    docker compose -f "$TEST_COMPOSE_FILE" up -d mlops-git-workflow 2>/dev/null || {
        echo "âš ï¸ ì»¨í…Œì´ë„ˆ ì‹œì‘ ê±´ë„ˆëœ€ (ì´ë¯¸ì§€ ë¹Œë“œ í•„ìš”)"
        return 0
    }
    
    # ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
    sleep 5
    if docker compose -f "$TEST_COMPOSE_FILE" ps mlops-git-workflow | grep -q "Up"; then
        echo "âœ… Git ì›Œí¬í”Œë¡œìš° ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì¤‘"
        
        # ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ Git ëª…ë ¹ì–´ í…ŒìŠ¤íŠ¸
        echo "ğŸ§ª ì»¨í…Œì´ë„ˆ ë‚´ë¶€ Git í…ŒìŠ¤íŠ¸..."
        
        # Git ë²„ì „ í™•ì¸
        docker compose -f "$TEST_COMPOSE_FILE" exec -T mlops-git-workflow git --version
        
        # Git ì„¤ì • í™•ì¸
        docker compose -f "$TEST_COMPOSE_FILE" exec -T mlops-git-workflow git config --global user.name || echo "Git ì‚¬ìš©ì ì„¤ì • í•„ìš”"
        
        # ì›Œí‚¹ ë””ë ‰í„°ë¦¬ í™•ì¸
        docker compose -f "$TEST_COMPOSE_FILE" exec -T mlops-git-workflow pwd
        
        echo "âœ… ì»¨í…Œì´ë„ˆ ë‚´ë¶€ Git í…ŒìŠ¤íŠ¸ ì™„ë£Œ"
    else
        echo "âš ï¸ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨"
    fi
    
    # ì»¨í…Œì´ë„ˆ ì •ë¦¬
    docker compose -f "$TEST_COMPOSE_FILE" down mlops-git-workflow 2>/dev/null || true
}

# 5. Docker ë³¼ë¥¨ ë§ˆìš´íŠ¸ í…ŒìŠ¤íŠ¸
test_docker_volume_mount() {
    echo "ğŸ“ 5. Docker ë³¼ë¥¨ ë§ˆìš´íŠ¸ í…ŒìŠ¤íŠ¸..."
    
    # í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
    TEST_FILE="test-docker-mount.txt"
    echo "Docker ë³¼ë¥¨ ë§ˆìš´íŠ¸ í…ŒìŠ¤íŠ¸" > "$TEST_FILE"
    
    # ì»¨í…Œì´ë„ˆ ì‹œì‘ (ê°„ë‹¨í•œ ëª…ë ¹)
    if docker compose -f "$TEST_COMPOSE_FILE" run --rm mlops-git-workflow /bin/bash -c "ls -la /workspace/$TEST_FILE" 2>/dev/null; then
        echo "âœ… Docker ë³¼ë¥¨ ë§ˆìš´íŠ¸ í…ŒìŠ¤íŠ¸ ì„±ê³µ"
    else
        echo "âš ï¸ Docker ë³¼ë¥¨ ë§ˆìš´íŠ¸ í…ŒìŠ¤íŠ¸ ê±´ë„ˆëœ€"
    fi
    
    # í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‚­ì œ
    rm -f "$TEST_FILE"
}

# 6. WSL-Docker Git ì„¤ì • ê³µìœ  í…ŒìŠ¤íŠ¸
test_wsl_docker_git_config_sharing() {
    echo "ğŸ”— 6. WSL-Docker Git ì„¤ì • ê³µìœ  í…ŒìŠ¤íŠ¸..."
    
    # WSL Git ì‚¬ìš©ì ì„¤ì • í™•ì¸
    WSL_GIT_USER=$(git config --global user.name 2>/dev/null || echo "")
    WSL_GIT_EMAIL=$(git config --global user.email 2>/dev/null || echo "")
    
    if [ -n "$WSL_GIT_USER" ] && [ -n "$WSL_GIT_EMAIL" ]; then
        echo "WSL Git ì‚¬ìš©ì: $WSL_GIT_USER <$WSL_GIT_EMAIL>"
        
        # ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ Git ì„¤ì • í™•ì¸
        if docker compose -f "$TEST_COMPOSE_FILE" run --rm mlops-git-workflow /bin/bash -c "git config --global user.name && git config --global user.email" 2>/dev/null; then
            echo "âœ… WSL-Docker Git ì„¤ì • ê³µìœ  í…ŒìŠ¤íŠ¸ ì„±ê³µ"
        else
            echo "âš ï¸ WSL-Docker Git ì„¤ì • ê³µìœ  í…ŒìŠ¤íŠ¸ ê±´ë„ˆëœ€"
        fi
    else
        echo "âš ï¸ WSL Git ì„¤ì •ì´ ì™„ë£Œë˜ì§€ ì•ŠìŒ"
    fi
}

# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
run_all_tests() {
    echo "ğŸš€ Docker ì›Œí¬í”Œë¡œìš° ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰..."
    echo ""
    
    test_docker_compose_file
    test_docker_network
    test_docker_build
    test_docker_git_integration
    test_docker_volume_mount
    test_wsl_docker_git_config_sharing
    
    echo ""
    echo "âœ… Docker ì›Œí¬í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ"
}

# ë©”ì¸ ì‹¤í–‰
run_all_tests
```

---

## ğŸ›¡ï¸ E2E Tests - ì „ì²´ ì›Œí¬í”Œë¡œìš°

### 3.1.5 End-to-End ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸

```python
# tests/e2e/test_3_1_complete_workflow.py
"""
MLOps Git ì›Œí¬í”Œë¡œìš° ì™„ì „í•œ E2E í…ŒìŠ¤íŠ¸
"""
import subprocess
import pytest
import tempfile
import time
from pathlib import Path
import os
import git

class TestCompleteGitWorkflow:
    """ì™„ì „í•œ Git ì›Œí¬í”Œë¡œìš° E2E í…ŒìŠ¤íŠ¸"""
    
    def setup_method(self):
        """í…ŒìŠ¤íŠ¸ ì „ ì„¤ì •"""
        self.project_root = Path(os.environ.get('MLOPS_PROJECT_ROOT', '/mnt/c/dev/movie-mlops'))
        self.repo = git.Repo(self.project_root)
        self.original_branch = self.repo.active_branch.name
        self.test_branches = []
        
    def teardown_method(self):
        """í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬"""
        # ì›ë˜ ë¸Œëœì¹˜ë¡œ ë³µê·€
        try:
            self.repo.git.checkout(self.original_branch)
        except:
            pass
            
        # í…ŒìŠ¤íŠ¸ ë¸Œëœì¹˜ ì •ë¦¬
        for branch_name in self.test_branches:
            try:
                self.repo.git.branch('-D', branch_name)
            except:
                pass
                
        # í…ŒìŠ¤íŠ¸ íŒŒì¼ ì •ë¦¬
        test_files = [
            "test-workflow-file.md",
            "test-experiment-result.json"
        ]
        for file_name in test_files:
            file_path = self.project_root / file_name
            if file_path.exists():
                file_path.unlink()
    
    def test_complete_mlops_feature_workflow(self):
        """ì™„ì „í•œ MLOps ê¸°ëŠ¥ ê°œë°œ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸"""
        
        # 1. MLOps ë¸Œëœì¹˜ ìƒì„±
        stage_num = 6
        description = "test-monitoring"
        branch_name = f"feature/stage{stage_num}-{description}"
        
        result = subprocess.run([
            'python', 'scripts/create_mlops_branch.py', 'stage',
            str(stage_num), description
        ], capture_output=True, text=True, cwd=self.project_root)
        
        assert result.returncode == 0, f"ë¸Œëœì¹˜ ìƒì„± ì‹¤íŒ¨: {result.stderr}"
        self.test_branches.append(branch_name)
        
        # 2. íŒŒì¼ ìˆ˜ì • ë° ì»¤ë°‹
        test_file = self.project_root / "test-workflow-file.md"
        test_file.write_text(f"# MLOps {stage_num}ë‹¨ê³„ í…ŒìŠ¤íŠ¸\n\nëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥ êµ¬í˜„ í…ŒìŠ¤íŠ¸")
        
        self.repo.index.add([str(test_file)])
        self.repo.index.commit(f"feat(stage{stage_num}): implement monitoring test feature")
        
        # 3. ë¸Œëœì¹˜ëª… ê²€ì¦
        result = subprocess.run([
            './scripts/validate_branch_name.sh', branch_name
        ], capture_output=True, text=True, cwd=self.project_root)
        
        assert result.returncode == 0, f"ë¸Œëœì¹˜ëª… ê²€ì¦ ì‹¤íŒ¨: {result.stderr}"
        
        # 4. Pre-push hook í…ŒìŠ¤íŠ¸ (ì‹œë®¬ë ˆì´ì…˜)
        # main ë¸Œëœì¹˜ë¡œ ì§ì ‘ í‘¸ì‹œ ì‹œë„ëŠ” hookì—ì„œ ì°¨ë‹¨ë˜ì–´ì•¼ í•¨
        # ì—¬ê¸°ì„œëŠ” í˜„ì¬ ë¸Œëœì¹˜ê°€ mainì´ ì•„ë‹˜ì„ í™•ì¸
        current_branch = self.repo.active_branch.name
        assert current_branch == branch_name, "ì˜ëª»ëœ ë¸Œëœì¹˜ì—ì„œ ì‘ì—… ì¤‘"
        assert current_branch != "main", "main ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ ì‘ì—…í•˜ë©´ ì•ˆë¨"
        
        print(f"âœ… ì™„ì „í•œ MLOps ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì„±ê³µ: {branch_name}")
    
    def test_experiment_workflow_with_docker(self):
        """ì‹¤í—˜ ì›Œí¬í”Œë¡œìš°ì™€ Docker í†µí•© í…ŒìŠ¤íŠ¸"""
        
        # 1. ì‹¤í—˜ ë¸Œëœì¹˜ ìƒì„±
        exp_description = "test-model-comparison"
        branch_name = f"experiment/{exp_description}"
        
        result = subprocess.run([
            'python', 'scripts/create_mlops_branch.py', 'experiment', exp_description
        ], capture_output=True, text=True, cwd=self.project_root)
        
        assert result.returncode == 0, f"ì‹¤í—˜ ë¸Œëœì¹˜ ìƒì„± ì‹¤íŒ¨: {result.stderr}"
        self.test_branches.append(branch_name)
        
        # 2. ì‹¤í—˜ ê²°ê³¼ íŒŒì¼ ìƒì„±
        exp_result = {
            "experiment": exp_description,
            "model": "test_model",
            "accuracy": 0.95,
            "created_at": time.strftime("%Y-%m-%d %H:%M:%S")
        }
        
        import json
        result_file = self.project_root / "test-experiment-result.json"
        result_file.write_text(json.dumps(exp_result, indent=2))
        
        # 3. ì‹¤í—˜ ê²°ê³¼ ì»¤ë°‹
        self.repo.index.add([str(result_file)])
        self.repo.index.commit(f"experiment: {exp_description} results with 95% accuracy")
        
        # 4. Docker í™˜ê²½ì—ì„œ ì‹¤í—˜ ì¬í˜„ì„± í…ŒìŠ¤íŠ¸ (ì‹œë®¬ë ˆì´ì…˜)
        # ì‹¤ì œë¡œëŠ” Docker ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í—˜ì„ ì‹¤í–‰í•˜ê² ì§€ë§Œ,
        # ì—¬ê¸°ì„œëŠ” Docker Compose íŒŒì¼ ì¡´ì¬ í™•ì¸
        docker_compose_file = self.project_root / "docker-compose.git-workflow.yml"
        assert docker_compose_file.exists(), "Docker Compose ì›Œí¬í”Œë¡œìš° íŒŒì¼ ì—†ìŒ"
        
        print(f"âœ… ì‹¤í—˜ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì„±ê³µ: {branch_name}")
    
    def test_workflow_automation_tools(self):
        """ì›Œí¬í”Œë¡œìš° ìë™í™” ë„êµ¬ í†µí•© í…ŒìŠ¤íŠ¸"""
        
        # 1. ì›Œí¬í”Œë¡œìš° ìƒíƒœ í™•ì¸ ë„êµ¬ í…ŒìŠ¤íŠ¸
        result = subprocess.run([
            'python', 'scripts/git_workflow.py', 'status'
        ], capture_output=True, text=True, cwd=self.project_root)
        
        assert result.returncode == 0, f"ì›Œí¬í”Œë¡œìš° ìƒíƒœ í™•ì¸ ì‹¤íŒ¨: {result.stderr}"
        assert "MLOps Git ì›Œí¬í”Œë¡œìš° ìƒíƒœ" in result.stdout
        
        # 2. ë¸Œëœì¹˜ ê²€ì¦ ë„êµ¬ ì¼ê´„ í…ŒìŠ¤íŠ¸
        test_branches = [
            ("feature/stage7-security", True),
            ("experiment/security-test", True),
            ("invalid-branch-name", False)
        ]
        
        for branch_name, should_pass in test_branches:
            result = subprocess.run([
                './scripts/validate_branch_name.sh', branch_name
            ], capture_output=True, text=True, cwd=self.project_root)
            
            if should_pass:
                assert result.returncode == 0, f"ìœ íš¨í•œ ë¸Œëœì¹˜ {branch_name}ì´ ì‹¤íŒ¨í•¨"
            else:
                assert result.returncode != 0, f"ë¬´íš¨í•œ ë¸Œëœì¹˜ {branch_name}ì´ í†µê³¼í•¨"
        
        print("âœ… ì›Œí¬í”Œë¡œìš° ìë™í™” ë„êµ¬ í…ŒìŠ¤íŠ¸ ì„±ê³µ")
    
    def test_wsl_docker_environment_integration(self):
        """WSL + Docker í™˜ê²½ í†µí•© í…ŒìŠ¤íŠ¸"""
        
        # 1. WSL í™˜ê²½ ë³€ìˆ˜ í™•ì¸
        wsl_distro = os.environ.get('WSL_DISTRO_NAME')
        if wsl_distro:
            print(f"WSL í™˜ê²½: {wsl_distro}")
        
        # 2. í”„ë¡œì íŠ¸ ê²½ë¡œê°€ WSL ë§ˆìš´íŠ¸ ê²½ë¡œì¸ì§€ í™•ì¸
        project_path = str(self.project_root)
        if "/mnt/c/" in project_path:
            print(f"WSL Windows ë§ˆìš´íŠ¸ ê²½ë¡œ í™•ì¸: {project_path}")
        
        # 3. Docker ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
        result = subprocess.run(['docker', 'ps'], capture_output=True, text=True)
        if result.returncode == 0:
            print("âœ… Docker ì„œë¹„ìŠ¤ ì‹¤í–‰ ì¤‘")
        else:
            print("âš ï¸ Docker ì„œë¹„ìŠ¤ ì ‘ê·¼ ë¶ˆê°€")
        
        # 4. Git ì„¤ì •ì´ WSLì— ìµœì í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸
        wsl_configs = ['core.autocrlf', 'core.filemode', 'core.ignorecase']
        for config in wsl_configs:
            result = subprocess.run([
                'git', 'config', '--global', config
            ], capture_output=True, text=True)
            assert result.returncode == 0, f"WSL Git ì„¤ì • {config} ì—†ìŒ"
        
        print("âœ… WSL + Docker í™˜ê²½ í†µí•© í…ŒìŠ¤íŠ¸ ì„±ê³µ")
```

---

## ğŸš€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê°€ì´ë“œ

### ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# WSL Ubuntu í™˜ê²½ì—ì„œ ì‹¤í–‰
cd /mnt/c/dev/movie-mlops

# 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "ğŸ§ª ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰..."
python -m pytest tests/unit/test_3_1_*.py -v

# 2. í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "ğŸ”— í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰..."
python -m pytest tests/integration/test_3_1_*.py -v

# 3. Docker í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "ğŸ³ Docker í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰..."
bash tests/integration/test_3_1_docker_workflow.sh

# 4. E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "ğŸ¯ E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰..."
python -m pytest tests/e2e/test_3_1_*.py -v

# 5. ì „ì²´ í…ŒìŠ¤íŠ¸ í•œë²ˆì— ì‹¤í–‰
echo "ğŸš€ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰..."
python -m pytest tests/ -k "test_3_1" -v --tb=short
```

### í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ì¸

```bash
# ì»¤ë²„ë¦¬ì§€ í¬í•¨ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python -m pytest tests/ -k "test_3_1" --cov=scripts --cov-report=html

# ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ í™•ì¸
open htmlcov/index.html  # WSLì—ì„œëŠ” explorer.exe htmlcov/index.html
```

### Docker í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# Docker ì»¨í…Œì´ë„ˆì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
docker compose -f docker-compose.git-workflow.yml exec mlops-git-workflow bash

# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ
cd /workspace
python -m pytest tests/unit/test_3_1_*.py -v
```

---

## âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ ê¸°ì¤€

### 3.1.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ê¸°ì¤€
- [ ] WSL Git ì„¤ì • í…ŒìŠ¤íŠ¸ 100% í†µê³¼
- [ ] MLOps ë¸Œëœì¹˜ ë„¤ì´ë° ê²€ì¦ í…ŒìŠ¤íŠ¸ 100% í†µê³¼  
- [ ] Git ë³„ì¹­ ì„¤ì • í…ŒìŠ¤íŠ¸ 100% í†µê³¼
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 90% ì´ìƒ

### 3.1.2 í†µí•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ ê¸°ì¤€
- [ ] MLOps ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ í…ŒìŠ¤íŠ¸ 100% í†µê³¼
- [ ] Docker ì›Œí¬í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸ 100% í†µê³¼
- [ ] WSL-Docker-Git ì„¤ì • ê³µìœ  í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ìë™í™” ë„êµ¬ ì—°ë™ í…ŒìŠ¤íŠ¸ 100% í†µê³¼

### 3.1.3 E2E í…ŒìŠ¤íŠ¸ ì™„ë£Œ ê¸°ì¤€
- [ ] ì™„ì „í•œ MLOps ì›Œí¬í”Œë¡œìš° ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì‹¤í—˜ ë¸Œëœì¹˜ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì›Œí¬í”Œë¡œìš° ìë™í™” ë„êµ¬ í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] WSL + Docker í™˜ê²½ í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼

### 3.1.4 ì„±ëŠ¥ ë° ì•ˆì •ì„± ê¸°ì¤€
- [ ] ë¸Œëœì¹˜ ìƒì„± ì‹œê°„ 5ì´ˆ ì´í•˜
- [ ] Docker ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œê°„ 30ì´ˆ ì´í•˜
- [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ ì´ 10ë¶„ ì´í•˜
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ WSL ê¸°ì¤€ 1GB ì´í•˜

ì´ì œ WSL + Docker í™˜ê²½ì—ì„œ MLOps Git ì›Œí¬í”Œë¡œìš°ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì²´ê³„ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” ì™„ì „í•œ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ê°€ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤!
