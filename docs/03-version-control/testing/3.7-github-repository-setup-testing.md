# 3.7 GitHub Repository Setup 테스트 가이드

## 📋 테스트 개요

**목표**: GitHub 저장소 설정 및 권한 관리 시스템의 모든 기능이 정상 작동하는지 검증
**테스트 범위**: 저장소 메타데이터, 이슈/PR 템플릿, CODEOWNERS, 라벨 시스템, 자동화 스크립트
**예상 소요 시간**: 30-45분
**실전 검증 완료**: ✅ 2024년 12월 WSL Ubuntu + GitHub 환경에서 검증됨

---

## 🚀 원클릭 자동 설정 및 테스트

### 🎯 전체 자동화 스크립트

```bash
#!/bin/bash

# =================================================================
# 3.7 GitHub Repository Setup 완전 자동화 설정 및 테스트 스크립트
# WSL Ubuntu + GitHub 환경 완전 지원
# 실전 검증 완료: 2024년 12월
# =================================================================

set -e

echo \"🚀 3.7 GitHub Repository Setup 자동 설정 및 테스트 시작...\"
echo \"📍 현재 위치: $(pwd)\"
echo \"🕒 시작 시간: $(date)\"
echo \"==================================================\"

# 색상 정의
RED='\\033[0;31m'
GREEN='\\033[0;32m'
YELLOW='\\033[1;33m'
BLUE='\\033[0;34m'
NC='\\033[0m' # No Color

# 로그 함수
log_info() { echo -e \"${BLUE}ℹ️  $1${NC}\"; }
log_success() { echo -e \"${GREEN}✅ $1${NC}\"; }
log_warning() { echo -e \"${YELLOW}⚠️  $1${NC}\"; }
log_error() { echo -e \"${RED}❌ $1${NC}\"; }

# 결과 추적
RESULTS_DIR=\"results/3.7-github-repository-setup\"
TIMESTAMP=$(date '+%Y%m%d_%H%M%S')
TEST_LOG=\"$RESULTS_DIR/test_log_$TIMESTAMP.txt\"
TEST_REPORT=\"$RESULTS_DIR/test_report_$TIMESTAMP.json\"
GENERATED_FILES_LIST=\"$RESULTS_DIR/generated_files_$TIMESTAMP.txt\"

# 성능 추적
declare -A PERFORMANCE_METRICS
declare -A TEST_RESULTS

# 결과 디렉터리 생성
mkdir -p \"$RESULTS_DIR\"

# 로그 시작
{
    echo \"==================================================\"
    echo \"3.7 GitHub Repository Setup 테스트 로그\"
    echo \"시작 시간: $(date)\"
    echo \"WSL 환경: $(uname -a)\"
    echo \"Git 버전: $(git --version)\"
    echo \"==================================================\"
} > \"$TEST_LOG\"

# 메인 함수들
setup_git_environment() {
    log_info \"Git 환경 설정 중...\"
    
    # 기본 디렉터리 설정
    cd /mnt/c/dev/movie-mlops
    
    # Git 저장소 초기화 (이미 초기화된 경우 무시)
    if [ ! -d \".git\" ]; then
        git init
        log_success \"Git 저장소 초기화 완료\"
    else
        log_info \"Git 저장소 이미 초기화됨\"
    fi
    
    # Git 사용자 설정 확인 및 설정
    git_name=$(git config user.name 2>/dev/null || echo \"\")
    git_email=$(git config user.email 2>/dev/null || echo \"\")
    
    if [ -z \"$git_name\" ] || [ -z \"$git_email\" ]; then
        log_warning \"Git 사용자 설정이 필요합니다\"
        # 기본값 설정 (실제 사용 시 변경 필요)
        git config user.name \"Movie MLOps Team\"
        git config user.email \"team@movie-mlops.com\"
        log_success \"Git 사용자 기본값 설정 완료\"
    fi
    
    log_success \"Git 환경 설정 완료\"
}

create_repository_files() {
    log_info \"저장소 기본 파일 생성 중...\"
    
    # README.md 생성
    cat > README.md << 'EOF'
# Movie MLOps Project

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![Docker](https://img.shields.io/badge/docker-supported-brightgreen.svg)](https://www.docker.com/)
[![MLOps](https://img.shields.io/badge/MLOps-enabled-orange.svg)](https://ml-ops.org/)

## 🎬 프로젝트 개요

Movie MLOps Project는 영화 추천 시스템을 위한 완전한 MLOps 파이프라인을 제공합니다. 
데이터 수집부터 모델 배포까지의 전체 머신러닝 생명주기를 자동화하고 관리합니다.

### 🌟 주요 특징

- **완전한 MLOps 파이프라인**: 데이터 처리, 모델 훈련, 평가, 배포의 전체 과정 자동화
- **데이터 버전 관리**: DVC를 통한 체계적인 데이터 버전 관리
- **모델 버전 관리**: MLflow를 통한 실험 추적 및 모델 관리  
- **자동화된 배포**: Docker 컨테이너를 통한 일관된 배포 환경
- **코드 품질 관리**: Black, isort, flake8를 통한 코드 품질 보장
- **지속적 통합**: GitHub Actions를 통한 CI/CD 파이프라인

### 🏗️ 아키텍처

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Data Source   │    │   Data Pipeline │    │   ML Pipeline   │
│                 │───▶│                 │───▶│                 │
│ • TMDB API      │    │ • Data Collection│   │ • Feature Eng   │
│ • User Ratings  │    │ • Preprocessing  │   │ • Model Training│
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                 │
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Monitoring    │    │   Model Store   │    │   Deployment    │
│                 │◀───│                 │◀───│                 │
│ • Performance   │    │ • MLflow        │    │ • Docker        │
│ • Drift Detection│   │ • Model Registry│    │ • K8s           │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 🚀 빠른 시작

### 사전 요구사항

- Python 3.8+
- Docker
- Git
- WSL2 (Windows 사용자)

### 설치

1. **저장소 클론**
   ```bash
   git clone https://github.com/your-username/movie-mlops.git
   cd movie-mlops
   ```

2. **가상환경 설정**
   ```bash
   python -m venv venv
   source venv/bin/activate  # Windows: venv\\Scripts\\activate
   ```

3. **의존성 설치**
   ```bash
   pip install -r requirements.txt
   pip install -r requirements-dev.txt
   ```

4. **환경 설정**
   ```bash
   cp .env.example .env
   # .env 파일에서 필요한 환경 변수 설정
   ```

5. **초기 설정 실행**
   ```bash
   python scripts/setup_project.py
   ```

### 사용법

#### 데이터 파이프라인 실행

```bash
# 데이터 수집
python src/data/collect_data.py

# 데이터 전처리
python src/data/preprocess_data.py

# 특성 엔지니어링
python src/features/build_features.py
```

#### 모델 훈련

```bash
# 모델 훈련
python src/models/train_model.py

# 모델 평가
python src/models/evaluate_model.py
```

#### 모델 배포

```bash
# Docker 이미지 빌드
docker build -t movie-recommender .

# 서비스 실행
docker run -p 8000:8000 movie-recommender
```

#### 전체 파이프라인 실행

```bash
# DVC 파이프라인 실행
dvc repro

# 또는 Make를 사용
make pipeline
```

## 📊 프로젝트 구조

```
movie-mlops/
├── data/                   # 데이터 디렉터리
│   ├── raw/               # 원시 데이터
│   ├── interim/           # 중간 처리 데이터
│   ├── processed/         # 처리 완료 데이터
│   └── external/          # 외부 데이터
├── src/                   # 소스 코드
│   ├── data/             # 데이터 처리
│   ├── features/         # 특성 엔지니어링
│   ├── models/           # 모델 관련
│   ├── visualization/    # 시각화
│   └── utils/            # 유틸리티
├── notebooks/            # Jupyter 노트북
├── scripts/              # 스크립트
├── tests/                # 테스트
├── docker/               # Docker 설정
├── docs/                 # 문서
├── models/               # 학습된 모델
├── reports/              # 보고서
├── requirements.txt      # Python 의존성
├── dvc.yaml             # DVC 파이프라인
├── Dockerfile           # Docker 설정
└── Makefile             # 빌드 설정
```

## 🛠️ 개발 환경

### 코드 품질

이 프로젝트는 높은 코드 품질을 유지하기 위해 다음 도구들을 사용합니다:

- **Black**: 코드 포맷팅
- **isort**: import 정렬
- **flake8**: 린팅
- **mypy**: 타입 검사
- **pre-commit**: Git hook을 통한 자동 검사

### 설정

```bash
# Pre-commit 설치
pre-commit install

# 코드 품질 검사
make lint

# 코드 포맷팅
make format
```

### 테스트

```bash
# 전체 테스트 실행
make test

# 특정 테스트 실행
pytest tests/test_data_processing.py

# 커버리지 확인
make coverage
```

## 📈 모니터링

### MLflow

모델 실험 추적 및 관리를 위해 MLflow를 사용합니다:

```bash
# MLflow UI 시작
mlflow ui

# 브라우저에서 http://localhost:5000 접속
```

### 데이터 품질 모니터링

```bash
# 데이터 품질 검사
python src/data/validate_data.py

# 데이터 드리프트 감지
python src/monitoring/detect_drift.py
```

## 🚀 배포

### 로컬 배포

```bash
# API 서버 시작
uvicorn src.api.main:app --reload

# 브라우저에서 http://localhost:8000/docs 접속
```

### Docker 배포

```bash
# 이미지 빌드
docker build -t movie-recommender:latest .

# 컨테이너 실행
docker run -d -p 8000:8000 --name movie-api movie-recommender:latest
```

### 클라우드 배포

#### AWS ECS

```bash
# AWS CLI 설정 후
make deploy-aws
```

#### Google Cloud Run

```bash
# GCP 설정 후
make deploy-gcp
```

## 🤝 기여하기

프로젝트에 기여하고 싶으시다면 [CONTRIBUTING.md](CONTRIBUTING.md)를 참조해 주세요.

### 기여 과정

1. 이 저장소를 Fork합니다
2. 새로운 브랜치를 생성합니다 (`git checkout -b feature/amazing-feature`)
3. 변경사항을 커밋합니다 (`git commit -m 'Add some amazing feature'`)
4. 브랜치에 Push합니다 (`git push origin feature/amazing-feature`)
5. Pull Request를 생성합니다

### 개발 가이드라인

- PEP 8 스타일 가이드를 따릅니다
- 모든 새로운 기능에는 테스트를 작성합니다
- 문서를 업데이트합니다
- Pre-commit hook을 통과해야 합니다

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 자세한 내용은 [LICENSE](LICENSE) 파일을 참조하세요.

## 👥 팀

- **Data Team**: 데이터 수집 및 전처리
- **ML Team**: 모델 개발 및 평가  
- **Platform Team**: 인프라 및 배포
- **Product Team**: 제품 기획 및 관리

## 📞 지원

- **문서**: [docs/](docs/)
- **이슈**: [GitHub Issues](https://github.com/your-username/movie-mlops/issues)
- **토론**: [GitHub Discussions](https://github.com/your-username/movie-mlops/discussions)

## 🙏 감사의 말

이 프로젝트는 다음 오픈소스 프로젝트들의 도움을 받았습니다:

- [MLflow](https://mlflow.org/)
- [DVC](https://dvc.org/)
- [FastAPI](https://fastapi.tiangolo.com/)
- [Streamlit](https://streamlit.io/)

---

**Movie MLOps Project** - 영화 추천의 미래를 만들어갑니다 🎬✨
EOF

    # CONTRIBUTING.md 생성
    cat > CONTRIBUTING.md << 'EOF'
# 기여 가이드

Movie MLOps Project에 기여해 주셔서 감사합니다! 이 문서는 프로젝트에 효과적으로 기여하는 방법을 안내합니다.

## 📋 목차

- [기여 방법](#기여-방법)
- [개발 환경 설정](#개발-환경-설정)
- [코딩 표준](#코딩-표준)
- [테스트](#테스트)
- [Pull Request 가이드라인](#pull-request-가이드라인)
- [이슈 보고](#이슈-보고)
- [코드 리뷰 과정](#코드-리뷰-과정)

## 🤝 기여 방법

### 1. 이슈 확인

기여하기 전에 [GitHub Issues](https://github.com/your-username/movie-mlops/issues)를 확인하여:
- 중복된 작업을 피하세요
- 관련 논의가 있는지 확인하세요
- 도움이 필요한 영역을 찾으세요

### 2. Fork 및 브랜치 생성

```bash
# 1. 저장소 Fork
# GitHub에서 Fork 버튼 클릭

# 2. 로컬로 클론
git clone https://github.com/your-username/movie-mlops.git
cd movie-mlops

# 3. 업스트림 추가
git remote add upstream https://github.com/original-username/movie-mlops.git

# 4. 새 브랜치 생성
git checkout -b feature/your-feature-name
```

### 3. 브랜치 명명 규칙

- `feature/`: 새로운 기능
- `bugfix/`: 버그 수정
- `docs/`: 문서 업데이트
- `refactor/`: 코드 리팩토링
- `test/`: 테스트 추가/수정

예시:
```bash
git checkout -b feature/recommendation-algorithm
git checkout -b bugfix/data-preprocessing-error
git checkout -b docs/api-documentation
```

## 🛠️ 개발 환경 설정

### 1. Python 환경

```bash
# Python 3.8+ 필요
python --version

# 가상환경 생성
python -m venv venv
source venv/bin/activate  # Windows: venv\\Scripts\\activate

# 의존성 설치
pip install -r requirements.txt
pip install -r requirements-dev.txt
```

### 2. Pre-commit Hook 설정

```bash
# Pre-commit 설치
pre-commit install

# 모든 파일에 대해 실행 (선택적)
pre-commit run --all-files
```

### 3. 환경 변수 설정

```bash
# 환경 파일 복사
cp .env.example .env

# 필요한 환경 변수 설정
# - TMDB_API_KEY
# - MLFLOW_TRACKING_URI
# - DVC_REMOTE_CONFIG
```

## 📝 코딩 표준

### Python 스타일 가이드

우리는 [PEP 8](https://www.python.org/dev/peps/pep-0008/)을 따르며, 다음 도구들을 사용합니다:

#### 1. 코드 포맷팅

```bash
# Black으로 자동 포맷팅
black src/ tests/

# isort로 import 정렬
isort src/ tests/
```

#### 2. 린팅

```bash
# flake8으로 코드 검사
flake8 src/ tests/

# pylint로 추가 검사
pylint src/
```

#### 3. 타입 힌트

```python
# 좋은 예
def process_movie_data(movie_id: int, rating: float) -> Dict[str, Any]:
    \"\"\"영화 데이터를 처리합니다.\"\"\"
    return {\"movie_id\": movie_id, \"processed_rating\": rating * 2}

# 피해야 할 예
def process_movie_data(movie_id, rating):
    return {\"movie_id\": movie_id, \"processed_rating\": rating * 2}
```

### 문서화

#### 1. Docstring 스타일

```python
def train_recommendation_model(
    data: pd.DataFrame, 
    model_type: str = \"collaborative_filtering\"
) -> Tuple[Any, Dict[str, float]]:
    \"\"\"
    추천 모델을 훈련합니다.
    
    Args:
        data: 훈련용 데이터프레임
        model_type: 모델 타입 (\"collaborative_filtering\", \"content_based\")
        
    Returns:
        Tuple[model, metrics]: 훈련된 모델과 평가 메트릭
        
    Raises:
        ValueError: 지원되지 않는 model_type인 경우
        
    Example:
        >>> data = load_training_data()
        >>> model, metrics = train_recommendation_model(data)
        >>> print(f\"RMSE: {metrics['rmse']}\")
    \"\"\"
```

#### 2. README 업데이트

새로운 기능을 추가할 때는 README.md의 해당 섹션을 업데이트하세요.

### 커밋 메시지 규칙

[Conventional Commits](https://www.conventionalcommits.org/) 형식을 따릅니다:

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

#### 타입

- `feat`: 새로운 기능
- `fix`: 버그 수정
- `docs`: 문서 변경
- `style`: 코드 스타일 변경 (포맷팅, 세미콜론 등)
- `refactor`: 코드 리팩토링
- `test`: 테스트 추가/수정
- `chore`: 빌드 과정이나 도구 변경

#### 예시

```bash
feat(recommendation): add collaborative filtering algorithm
fix(data): resolve missing value handling in preprocessing
docs(api): update endpoint documentation
test(models): add unit tests for model evaluation
```

## 🧪 테스트

### 1. 테스트 작성

모든 새로운 기능에는 테스트를 작성해야 합니다:

```python
# tests/test_recommendation.py
import pytest
from src.models.recommendation import CollaborativeFilteringModel

class TestCollaborativeFiltering:
    \"\"\"협업 필터링 모델 테스트\"\"\"
    
    @pytest.fixture
    def sample_data(self):
        \"\"\"테스트용 샘플 데이터\"\"\"
        return {
            \"user_id\": [1, 1, 2, 2],
            \"movie_id\": [10, 20, 10, 30],
            \"rating\": [4.5, 3.0, 5.0, 2.5]
        }
    
    def test_model_training(self, sample_data):
        \"\"\"모델 훈련 테스트\"\"\"
        model = CollaborativeFilteringModel()
        model.fit(sample_data)
        
        assert model.is_fitted
        assert model.n_users > 0
        assert model.n_movies > 0
    
    def test_prediction(self, sample_data):
        \"\"\"예측 테스트\"\"\"
        model = CollaborativeFilteringModel()
        model.fit(sample_data)
        
        prediction = model.predict(user_id=1, movie_id=30)
        
        assert isinstance(prediction, float)
        assert 0 <= prediction <= 5
```

### 2. 테스트 실행

```bash
# 전체 테스트 실행
pytest

# 특정 파일 테스트
pytest tests/test_recommendation.py

# 커버리지 확인
pytest --cov=src tests/

# 특정 마커 테스트만 실행
pytest -m \"not slow\"
```

### 3. 테스트 마커

```python
import pytest

@pytest.mark.slow
def test_full_pipeline():
    \"\"\"전체 파이프라인 테스트 (시간이 오래 걸림)\"\"\"
    pass

@pytest.mark.integration
def test_api_endpoint():
    \"\"\"API 통합 테스트\"\"\"
    pass
```

## 🔄 Pull Request 가이드라인

### 1. PR 생성 전 체크리스트

- [ ] 모든 테스트가 통과하는가?
- [ ] Pre-commit hook이 통과하는가?
- [ ] 문서가 업데이트되었는가?
- [ ] 새로운 의존성이 requirements.txt에 추가되었는가?

### 2. PR 제목

```
feat(recommendation): implement matrix factorization algorithm

fix(data): handle missing values in movie metadata

docs(deployment): add Docker deployment guide
```

### 3. PR 설명

PR 템플릿을 사용하여 다음 내용을 포함하세요:

```markdown
## 변경 사항 요약
- 새로운 행렬 인수분해 추천 알고리즘 구현
- 평가 메트릭 추가 (RMSE, MAE)

## 관련 이슈
Closes #123

## 테스트
- [x] 단위 테스트 작성 및 통과
- [x] 통합 테스트 통과
- [x] 성능 테스트 완료

## 스크린샷 (UI 변경 시)
![Screenshot](url)

## 체크리스트
- [x] 코드가 스타일 가이드를 따름
- [x] 자체 코드 리뷰 완료
- [x] 문서 업데이트
- [x] 테스트 추가
```

### 4. 리뷰 과정

1. **자동 검사**: CI/CD 파이프라인이 자동으로 테스트 실행
2. **코드 리뷰**: 최소 1명의 승인 필요
3. **승인 후 병합**: Squash and merge 사용

## 🐛 이슈 보고

### 1. 버그 리포트

다음 정보를 포함하여 이슈를 생성하세요:

```markdown
## 버그 설명
간단명료한 버그 설명

## 재현 방법
1. '...' 로 이동
2. '...' 클릭
3. '...' 스크롤
4. 오류 발생

## 예상 동작
정상적으로 동작해야 하는 내용

## 실제 동작
실제로 발생한 문제

## 환경
- OS: [e.g. Ubuntu 20.04]
- Python: [e.g. 3.9.7]
- 브라우저: [e.g. Chrome 96]

## 추가 정보
스크린샷, 로그 등
```

### 2. 기능 요청

```markdown
## 기능 설명
제안하는 기능에 대한 명확한 설명

## 해결하려는 문제
현재 어떤 문제가 있는지 설명

## 제안하는 해결책
원하는 동작에 대한 설명

## 대안
고려해본 다른 해결책들

## 추가 정보
관련 자료, 참조 등
```

## 🔍 코드 리뷰 과정

### 1. 리뷰어 가이드라인

리뷰할 때 다음을 확인하세요:

- **기능성**: 코드가 의도한 대로 동작하는가?
- **가독성**: 코드가 이해하기 쉬운가?
- **성능**: 성능상 문제가 없는가?
- **보안**: 보안 취약점이 없는가?
- **테스트**: 적절한 테스트가 포함되어 있는가?

### 2. 리뷰 코멘트 예시

```markdown
# 좋은 피드백
이 함수는 너무 복잡해 보입니다. 여러 개의 작은 함수로 분리하는 것이 어떨까요?

# 구체적인 제안
```python
# 현재 코드 대신
def process_data(data):
    # 50줄의 복잡한 로직
    
# 다음과 같이 분리하면 어떨까요?
def validate_data(data):
    # 검증 로직
    
def transform_data(data):
    # 변환 로직
    
def process_data(data):
    validated_data = validate_data(data)
    return transform_data(validated_data)
```

# 칭찬도 잊지 마세요
이 알고리즘 최적화가 정말 좋네요! 성능이 크게 향상될 것 같습니다.
```

### 3. 작성자 가이드라인

리뷰를 받을 때:

- **열린 마음**: 피드백을 긍정적으로 받아들이세요
- **설명**: 복잡한 로직에는 주석을 추가하세요
- **질문**: 확실하지 않은 부분은 질문하세요
- **감사**: 리뷰어의 시간과 노력에 감사하세요

## 📊 성능 고려사항

### 1. 데이터 처리

```python
# 좋은 예: 벡터화 연산 사용
import pandas as pd
import numpy as np

def calculate_ratings_mean(ratings_df):
    return ratings_df.groupby('movie_id')['rating'].mean()

# 피해야 할 예: 반복문 사용
def calculate_ratings_mean_slow(ratings_df):
    means = {}
    for movie_id in ratings_df['movie_id'].unique():
        movie_ratings = ratings_df[ratings_df['movie_id'] == movie_id]['rating']
        means[movie_id] = movie_ratings.mean()
    return means
```

### 2. 메모리 사용

```python
# 좋은 예: 제너레이터 사용
def process_large_dataset(file_path):
    for chunk in pd.read_csv(file_path, chunksize=10000):
        yield process_chunk(chunk)

# 피해야 할 예: 전체 데이터를 메모리에 로드
def process_large_dataset_bad(file_path):
    data = pd.read_csv(file_path)  # 메모리 부족 위험
    return process_chunk(data)
```

## 🚀 배포 고려사항

### 1. Docker

새로운 의존성을 추가할 때 Dockerfile도 업데이트하세요:

```dockerfile
# requirements.txt 변경 시
COPY requirements.txt .
RUN pip install -r requirements.txt

# 새로운 시스템 패키지 필요 시
RUN apt-get update && apt-get install -y \\
    your-new-package \\
    && rm -rf /var/lib/apt/lists/*
```

### 2. 환경 변수

새로운 설정을 추가할 때:

1. `.env.example` 업데이트
2. 문서에 설명 추가
3. 기본값 제공

```python
import os

# 좋은 예
DATABASE_URL = os.getenv('DATABASE_URL', 'sqlite:///default.db')
API_KEY = os.getenv('API_KEY')  # 필수값

if not API_KEY:
    raise ValueError(\"API_KEY environment variable is required\")
```

## 📚 학습 자료

- [Python 스타일 가이드](https://www.python.org/dev/peps/pep-0008/)
- [MLOps 모범 사례](https://ml-ops.org/)
- [Git 브랜치 전략](https://nvie.com/posts/a-successful-git-branching-model/)
- [테스트 주도 개발](https://testdriven.io/)

## 💬 소통

- **GitHub Discussions**: 일반적인 질문과 토론
- **Slack**: 빠른 소통 (초대 링크는 별도 제공)
- **이메일**: team@movie-mlops.com

---

**모든 기여에 감사드리며, 함께 훌륭한 MLOps 프로젝트를 만들어 나가요!** 🚀
EOF

    # LICENSE 생성 (MIT)
    cat > LICENSE << 'EOF'
MIT License

Copyright (c) 2025 Movie MLOps Project

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the \"Software\"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
EOF

    # .gitignore 생성
    cat > .gitignore << 'EOF'
# Byte-compiled / optimized / DLL files
__pycache__/
*.py[cod]
*$py.class

# C extensions
*.so

# Distribution / packaging
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
pip-wheel-metadata/
share/python-wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# PyInstaller
*.manifest
*.spec

# Installer logs
pip-log.txt
pip-delete-this-directory.txt

# Unit test / coverage reports
htmlcov/
.tox/
.nox/
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*.cover
*.py,cover
.hypothesis/
.pytest_cache/

# Translations
*.mo
*.pot

# Django stuff:
*.log
local_settings.py
db.sqlite3
db.sqlite3-journal

# Flask stuff:
instance/
.webassets-cache

# Scrapy stuff:
.scrapy

# Sphinx documentation
docs/_build/

# PyBuilder
target/

# Jupyter Notebook
.ipynb_checkpoints

# IPython
profile_default/
ipython_config.py

# pyenv
.python-version

# pipenv
Pipfile.lock

# PEP 582
__pypackages__/

# Celery stuff
celerybeat-schedule
celerybeat.pid

# SageMath parsed files
*.sage.py

# Environments
.env
.venv
env/
venv/
ENV/
env.bak/
venv.bak/

# Spyder project settings
.spyderproject
.spyproject

# Rope project settings
.ropeproject

# mkdocs documentation
/site

# mypy
.mypy_cache/
.dmypy.json
dmypy.json

# Pyre type checker
.pyre/

# MLflow
mlruns/
mlartifacts/

# DVC
.dvc/
*.dvc

# Data directories
data/raw/
data/processed/
data/external/
data/interim/
!data/.gitkeep

# Model files
models/*.pkl
models/*.joblib
models/*.h5
models/*.pb
!models/.gitkeep

# Logs
logs/
*.log

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# Docker
.dockerignore

# Temporary files
*.tmp
*.temp

# API keys and secrets
.env
.env.local
.env.*.local
config/secrets.yaml

# Results and artifacts
results/
artifacts/
outputs/

# Notebooks (uncomment if needed)
# *.ipynb

# Weights & Biases
wandb/

# TensorBoard
runs/
tensorboard_logs/
EOF

    # 생성된 파일 목록 저장
    {
        echo \"README.md\"
        echo \"CONTRIBUTING.md\"
        echo \"LICENSE\"
        echo \".gitignore\"
    } >> \"$GENERATED_FILES_LIST\"

    log_success \"저장소 기본 파일 생성 완료\"
}

create_github_templates() {
    log_info \"GitHub 템플릿 생성 중...\"
    
    # .github 디렉터리 생성
    mkdir -p .github/{ISSUE_TEMPLATE,workflows}
    
    # 버그 리포트 템플릿
    cat > .github/ISSUE_TEMPLATE/bug_report.yml << 'EOF'
name: 🐛 Bug Report
description: 버그나 예상치 못한 동작을 신고합니다
title: \"[BUG] \"
labels: [\"bug\", \"needs-triage\"]
assignees: []
body:
  - type: markdown
    attributes:
      value: |
        Movie MLOps 프로젝트에서 버그를 발견해 주셔서 감사합니다! 
        가능한 한 자세한 정보를 제공해 주시면 빠르게 해결할 수 있습니다.
        
  - type: textarea
    id: bug-description
    attributes:
      label: 🐛 버그 설명
      description: 발생한 버그에 대한 명확하고 간결한 설명을 작성해 주세요.
      placeholder: 예) 모델 훈련 중 메모리 오류가 발생합니다.
    validations:
      required: true
      
  - type: textarea
    id: reproduction-steps
    attributes:
      label: 🔄 재현 방법
      description: 버그를 재현하기 위한 단계별 방법을 작성해 주세요.
      placeholder: |
        1. 데이터 로드 (python src/data/load_data.py)
        2. 모델 훈련 시작 (python src/models/train_model.py)
        3. 메모리 오류 발생
    validations:
      required: true
      
  - type: textarea
    id: expected-behavior
    attributes:
      label: ✅ 예상 동작
      description: 어떻게 동작해야 하는지 설명해 주세요.
      placeholder: 모델이 정상적으로 훈련되어야 합니다.
    validations:
      required: true
      
  - type: textarea
    id: actual-behavior
    attributes:
      label: ❌ 실제 동작
      description: 실제로 어떻게 동작하는지 설명해 주세요.
      placeholder: MemoryError가 발생하며 프로세스가 종료됩니다.
    validations:
      required: true
      
  - type: dropdown
    id: severity
    attributes:
      label: 🚨 심각도
      description: 이 버그의 심각도를 선택해 주세요.
      options:
        - Critical (시스템이 사용 불가능)
        - High (주요 기능에 영향)
        - Medium (일부 기능에 영향)
        - Low (사소한 문제)
    validations:
      required: true
      
  - type: dropdown
    id: component
    attributes:
      label: 🧩 구성 요소
      description: 버그가 발생한 구성 요소를 선택해 주세요.
      options:
        - Data Processing
        - Feature Engineering
        - Model Training
        - Model Evaluation
        - API/Deployment
        - Documentation
        - Infrastructure
        - Other
    validations:
      required: true
      
  - type: textarea
    id: environment
    attributes:
      label: 🖥️ 환경 정보
      description: 버그가 발생한 환경에 대한 정보를 제공해 주세요.
      placeholder: |
        - OS: Ubuntu 20.04
        - Python: 3.9.7
        - Docker: 20.10.12
        - GPU: NVIDIA RTX 3080
        - 메모리: 32GB
      render: markdown
    validations:
      required: true
      
  - type: textarea
    id: error-logs
    attributes:
      label: 📋 오류 로그
      description: 관련 오류 로그나 스택 트레이스를 첨부해 주세요.
      placeholder: |
        ```
        Traceback (most recent call last):
          File \"src/models/train_model.py\", line 42, in <module>
            model.fit(X_train, y_train)
        MemoryError: Unable to allocate 8.00 GiB for an array
        ```
      render: shell
      
  - type: textarea
    id: additional-context
    attributes:
      label: 📎 추가 정보
      description: 스크린샷, 관련 이슈, 또는 기타 유용한 정보를 제공해 주세요.
      placeholder: 관련 스크린샷이나 추가 설명을 여기에 작성해 주세요.
      
  - type: checkboxes
    id: checklist
    attributes:
      label: ✅ 체크리스트
      description: 다음 항목들을 확인해 주세요.
      options:
        - label: 기존 이슈를 검색했고 중복이 아님을 확인했습니다.
          required: true
        - label: 최신 버전을 사용하고 있습니다.
          required: true
        - label: 문제를 재현할 수 있는 최소한의 예제를 제공했습니다.
          required: false
        - label: 관련 로그와 오류 메시지를 포함했습니다.
          required: false
EOF

    # 기능 요청 템플릿
    cat > .github/ISSUE_TEMPLATE/feature_request.yml << 'EOF'
name: 🚀 Feature Request
description: 새로운 기능이나 개선사항을 제안합니다
title: \"[FEATURE] \"
labels: [\"enhancement\", \"needs-discussion\"]
assignees: []
body:
  - type: markdown
    attributes:
      value: |
        새로운 기능을 제안해 주셔서 감사합니다! 
        여러분의 아이디어가 Movie MLOps 프로젝트를 더욱 발전시킵니다.
        
  - type: textarea
    id: feature-description
    attributes:
      label: 🚀 기능 설명
      description: 제안하는 기능에 대한 명확하고 간결한 설명을 작성해 주세요.
      placeholder: 예) MLflow 모델 레지스트리와 통합하여 모델 버전 관리를 자동화
    validations:
      required: true
      
  - type: textarea
    id: problem-statement
    attributes:
      label: 🎯 해결하려는 문제
      description: 이 기능이 해결하려는 문제나 개선하려는 사용자 경험을 설명해 주세요.
      placeholder: |
        현재 문제:
        - 모델 버전 관리가 수동으로 이루어져 실수가 발생할 수 있음
        - 모델 성능 비교가 어려움
        - 프로덕션 배포 시 모델 추적이 복잡함
    validations:
      required: true
      
  - type: textarea
    id: proposed-solution
    attributes:
      label: 💡 제안하는 해결책
      description: 원하는 동작이나 기능에 대한 자세한 설명을 작성해 주세요.
      placeholder: |
        제안 사항:
        1. MLflow Model Registry API 통합
        2. 자동 모델 버전 태깅
        3. 성능 메트릭 기반 모델 비교 대시보드
        4. 원클릭 프로덕션 배포
    validations:
      required: true
      
  - type: dropdown
    id: feature-type
    attributes:
      label: 🏷️ 기능 유형
      description: 제안하는 기능의 유형을 선택해 주세요.
      options:
        - New Feature (완전히 새로운 기능)
        - Enhancement (기존 기능 개선)
        - Integration (외부 도구 통합)
        - Performance (성능 개선)
        - UI/UX (사용자 인터페이스 개선)
        - Documentation (문서 개선)
    validations:
      required: true
      
  - type: dropdown
    id: priority
    attributes:
      label: 📈 우선순위
      description: 이 기능의 중요도를 평가해 주세요.
      options:
        - Critical (즉시 필요)
        - High (높음)
        - Medium (보통)
        - Low (낮음)
        - Nice to have (있으면 좋음)
    validations:
      required: true
      
  - type: dropdown
    id: component
    attributes:
      label: 🧩 관련 구성 요소
      description: 이 기능이 영향을 미칠 구성 요소를 선택해 주세요.
      options:
        - Data Pipeline
        - Feature Engineering
        - Model Training
        - Model Evaluation
        - Model Deployment
        - API/Backend
        - Frontend/Dashboard
        - Infrastructure
        - Documentation
        - Testing
    validations:
      required: true
      
  - type: textarea
    id: alternatives
    attributes:
      label: 🔄 대안 고려사항
      description: 고려해본 다른 해결책이나 접근 방법이 있다면 설명해 주세요.
      placeholder: |
        고려한 대안:
        1. 자체 모델 레지스트리 구축 (시간이 많이 소요)
        2. 다른 MLOps 플랫폼 사용 (비용 증가)
        3. 현재 상태 유지 (확장성 문제)
      
  - type: textarea
    id: implementation-ideas
    attributes:
      label: 🛠️ 구현 아이디어
      description: 이 기능을 어떻게 구현할 수 있을지 아이디어가 있다면 공유해 주세요.
      placeholder: |
        구현 방향:
        1. MLflow 클라이언트 설정
        2. 모델 훈련 파이프라인에 자동 등록 로직 추가
        3. 웹 대시보드에 모델 비교 기능 구현
        
        필요한 라이브러리:
        - mlflow >= 2.0
        - streamlit (대시보드용)
      
  - type: textarea
    id: acceptance-criteria
    attributes:
      label: ✅ 수용 기준
      description: 이 기능이 완성되었다고 판단할 수 있는 기준을 작성해 주세요.
      placeholder: |
        완료 조건:
        - [ ] MLflow에 모델이 자동으로 등록됨
        - [ ] 모델 성능 메트릭이 추적됨
        - [ ] 대시보드에서 모델 비교 가능
        - [ ] 프로덕션 배포 워크플로우 구축
        - [ ] 문서화 완료
      
  - type: textarea
    id: additional-context
    attributes:
      label: 📎 추가 정보
      description: 관련 링크, 참고 자료, 스크린샷 등을 제공해 주세요.
      placeholder: |
        참고 자료:
        - MLflow Documentation: https://mlflow.org/docs/
        - 유사한 프로젝트 사례
        - 관련 논문이나 블로그 포스트
      
  - type: checkboxes
    id: checklist
    attributes:
      label: ✅ 체크리스트
      description: 다음 항목들을 확인해 주세요.
      options:
        - label: 기존 이슈를 검색했고 중복이 아님을 확인했습니다.
          required: true
        - label: 이 기능이 프로젝트의 목표와 일치함을 확인했습니다.
          required: true
        - label: 구현 가능성을 고려했습니다.
          required: false
        - label: 사용자 스토리나 사용 사례를 포함했습니다.
          required: false
EOF

    # Pull Request 템플릿
    cat > .github/PULL_REQUEST_TEMPLATE.md << 'EOF'
# Pull Request

## 📋 변경 사항 요약

<!-- 이 PR에서 무엇을 변경했는지 간단히 설명해 주세요 -->

## 🔗 관련 이슈

<!-- 관련 이슈가 있다면 링크해 주세요 -->
- Closes #(이슈 번호)
- Related to #(이슈 번호)

## 📝 변경 내용

### 추가된 기능
- [ ] 새로운 추천 알고리즘 구현
- [ ] API 엔드포인트 추가
- [ ] 대시보드 기능 개선

### 수정된 내용
- [ ] 버그 수정
- [ ] 성능 최적화
- [ ] 코드 리팩토링

### 제거된 내용
- [ ] 사용하지 않는 코드 제거
- [ ] 구버전 의존성 제거

## 🧪 테스트

### 테스트 유형
- [ ] 단위 테스트 (Unit Tests)
- [ ] 통합 테스트 (Integration Tests)
- [ ] 엔드투엔드 테스트 (E2E Tests)
- [ ] 성능 테스트 (Performance Tests)

### 테스트 실행 방법
```bash
# 테스트 실행 명령어를 작성해 주세요
pytest tests/
```

### 테스트 결과
- [ ] 모든 기존 테스트 통과
- [ ] 새로운 테스트 추가 및 통과
- [ ] 코드 커버리지 유지 또는 향상

## 🚀 배포 영향

### 인프라 변경
- [ ] 데이터베이스 스키마 변경
- [ ] 환경 변수 추가/변경
- [ ] Docker 이미지 업데이트
- [ ] 의존성 추가/업데이트

### 사용자 영향
- [ ] API 변경 (Breaking Changes)
- [ ] UI/UX 변경
- [ ] 새로운 기능 추가
- [ ] 성능 개선

### 마이그레이션 필요
- [ ] 데이터 마이그레이션 필요
- [ ] 설정 파일 업데이트 필요
- [ ] 문서 업데이트 필요

## 📊 성능 영향

<!-- 성능에 영향을 미치는 변경이 있다면 설명해 주세요 -->

### 벤치마크 결과
```
이전: 100ms
이후: 80ms (-20% 개선)
```

### 메모리 사용량
- [ ] 메모리 사용량 증가 없음
- [ ] 메모리 사용량 감소
- [ ] 메모리 사용량 증가 (사유: )

## 🔒 보안 고려사항

- [ ] 새로운 보안 취약점 없음
- [ ] 보안 테스트 실행
- [ ] 민감한 정보 노출 방지
- [ ] 인증/인가 로직 검토

## 📖 문서화

- [ ] README 업데이트
- [ ] API 문서 업데이트
- [ ] 코드 주석 추가
- [ ] 사용자 가이드 업데이트
- [ ] 개발자 문서 업데이트

## 🎯 리뷰 포인트

<!-- 리뷰어가 특별히 확인해야 할 부분이 있다면 작성해 주세요 -->

1. **알고리즘 로직**: `src/models/recommendation.py`의 새로운 알고리즘 구현
2. **API 호환성**: 기존 API와의 호환성 유지 여부
3. **성능 최적화**: 대용량 데이터 처리 최적화 로직

## 📱 스크린샷 (UI 변경 시)

<!-- UI 변경이 있다면 Before/After 스크린샷을 첨부해 주세요 -->

### Before
![before](이미지_URL)

### After
![after](이미지_URL)

## ✅ 체크리스트

### 코드 품질
- [ ] 코드가 프로젝트 스타일 가이드를 따름
- [ ] Pre-commit hook 통과
- [ ] 린터 오류 없음
- [ ] 타입 힌트 추가 (Python)

### 테스트
- [ ] 새로운 기능에 대한 테스트 작성
- [ ] 모든 테스트 통과
- [ ] 엣지 케이스 테스트 포함
- [ ] 테스트 커버리지 80% 이상 유지

### 리뷰
- [ ] 자체 코드 리뷰 완료
- [ ] 관련 팀원 리뷰 요청
- [ ] 주요 변경사항 설명 추가

### MLOps 관련
- [ ] 모델 성능 검증
- [ ] 데이터 검증 통과
- [ ] 파이프라인 테스트 완료
- [ ] 배포 준비 완료

### 문서화
- [ ] 코드 주석 적절히 추가
- [ ] API 문서 업데이트
- [ ] 사용자 가이드 업데이트
- [ ] CHANGELOG 업데이트

## 🚨 알려진 이슈

<!-- 알려진 제한사항이나 이슈가 있다면 작성해 주세요 -->

- 없음

## 🔮 향후 계획

<!-- 이 PR 이후 계획된 작업이 있다면 작성해 주세요 -->

- 다음 스프린트에서 A/B 테스트 구현 예정
- 성능 모니터링 대시보드 추가 계획

---

**리뷰어 분들께**: 궁금한 점이나 개선사항이 있으시면 언제든 코멘트 남겨주세요! 🙏
EOF

    # CODEOWNERS 파일
    cat > .github/CODEOWNERS << 'EOF'
# Movie MLOps Project - Code Owners
# https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners

# 전역 소유자 (모든 파일에 대한 기본 소유자)
* @movie-mlops-team

# 문서
*.md @docs-team @movie-mlops-team
/docs/ @docs-team @movie-mlops-team
README.md @docs-team @movie-mlops-team
CONTRIBUTING.md @docs-team @movie-mlops-team

# 데이터 파이프라인
/src/data/ @data-team @ml-team
/data/ @data-team
/notebooks/ @data-team @ml-team

# 머신러닝 모델
/src/models/ @ml-team
/src/features/ @ml-team @data-team
/models/ @ml-team

# API 및 배포
/src/api/ @platform-team
/docker/ @platform-team
/k8s/ @platform-team
Dockerfile* @platform-team

# 테스트
/tests/ @qa-team @ml-team @data-team
pytest.ini @qa-team
.coveragerc @qa-team

# 인프라 및 CI/CD
/.github/ @platform-team @movie-mlops-team
/scripts/ @platform-team
Makefile @platform-team
dvc.yaml @data-team @ml-team

# 설정 파일
*.yml @platform-team
*.yaml @platform-team
*.json @platform-team
*.toml @platform-team
.env* @platform-team
requirements*.txt @platform-team

# Python 설정
.flake8 @qa-team @platform-team
.pre-commit-config.yaml @qa-team @platform-team
pyproject.toml @qa-team @platform-team
setup.py @platform-team
setup.cfg @platform-team

# Git 설정
.gitignore @platform-team
.gitattributes @platform-team

# 라이선스 및 법적 문서
LICENSE @legal-team @movie-mlops-team
COPYRIGHT @legal-team @movie-mlops-team

# 보안 관련
SECURITY.md @security-team @movie-mlops-team
.github/workflows/security*.yml @security-team @platform-team

# 특정 중요 파일들
/src/config/ @platform-team @ml-team
/config/ @platform-team @ml-team

# MLOps 특화 설정
mlflow.yml @ml-team
airflow/ @data-team @platform-team
kubeflow/ @ml-team @platform-team

# 모니터링 및 로깅
/src/monitoring/ @platform-team @ml-team
/grafana/ @platform-team
/prometheus/ @platform-team

# 데이터 검증
/src/validation/ @data-team @qa-team
/great_expectations/ @data-team @qa-team
EOF

    # 생성된 파일 목록 저장
    {
        echo \".github/ISSUE_TEMPLATE/bug_report.yml\"
        echo \".github/ISSUE_TEMPLATE/feature_request.yml\"
        echo \".github/PULL_REQUEST_TEMPLATE.md\"
        echo \".github/CODEOWNERS\"
    } >> \"$GENERATED_FILES_LIST\"

    log_success \"GitHub 템플릿 생성 완료\"
}

create_github_scripts() {
    log_info \"GitHub 관리 스크립트 생성 중...\"
    
    # GitHub 라벨 설정 스크립트
    cat > scripts/setup_github_labels.py << 'EOF'
#!/usr/bin/env python3
\"\"\"
GitHub 라벨 설정 스크립트
MLOps 프로젝트에 최적화된 라벨 시스템을 설정합니다.
\"\"\"

import os
import sys
import json
import requests
import argparse
from typing import Dict, List, Optional
from dataclasses import dataclass
from datetime import datetime

@dataclass
class Label:
    \"\"\"GitHub 라벨 정보\"\"\"
    name: str
    color: str
    description: str

class GitHubLabelsManager:
    \"\"\"GitHub 라벨 관리 클래스\"\"\"
    
    def __init__(self, token: str, repo: str):
        self.token = token
        self.repo = repo
        self.base_url = \"https://api.github.com\"
        self.headers = {
            \"Authorization\": f\"token {token}\",
            \"Accept\": \"application/vnd.github.v3+json\"
        }
    
    def get_mlops_labels(self) -> List[Label]:
        \"\"\"MLOps 프로젝트용 라벨 정의\"\"\"
        return [
            # 우선순위 라벨
            Label(\"priority/critical\", \"d73a4a\", \"🚨 즉시 처리가 필요한 중요한 이슈\"),
            Label(\"priority/high\", \"ff6b6b\", \"🔴 높은 우선순위\"),
            Label(\"priority/medium\", \"feca57\", \"🟡 보통 우선순위\"),
            Label(\"priority/low\", \"48dbfb\", \"🔵 낮은 우선순위\"),
            
            # 타입 라벨
            Label(\"type/bug\", \"d73a4a\", \"🐛 버그 리포트\"),
            Label(\"type/feature\", \"a2eeef\", \"✨ 새로운 기능 요청\"),
            Label(\"type/enhancement\", \"84b6eb\", \"🚀 기존 기능 개선\"),
            Label(\"type/documentation\", \"0075ca\", \"📚 문서 관련\"),
            Label(\"type/question\", \"cc317c\", \"❓ 질문이나 토론\"),
            Label(\"type/maintenance\", \"ededed\", \"🔧 유지보수 작업\"),
            
            # MLOps 스테이지 라벨
            Label(\"stage/data-collection\", \"1d76db\", \"📊 데이터 수집 단계\"),
            Label(\"stage/data-processing\", \"0e8a16\", \"⚙️ 데이터 전처리 단계\"),
            Label(\"stage/feature-engineering\", \"fbca04\", \"🛠️ 특성 엔지니어링 단계\"),
            Label(\"stage/model-training\", \"d4c5f9\", \"🎯 모델 훈련 단계\"),
            Label(\"stage/model-evaluation\", \"f9d0c4\", \"📈 모델 평가 단계\"),
            Label(\"stage/model-deployment\", \"c2e0c6\", \"🚀 모델 배포 단계\"),
            Label(\"stage/monitoring\", \"fef2c0\", \"📱 모니터링 단계\"),
            
            # 구성 요소 라벨
            Label(\"component/api\", \"0052cc\", \"🌐 API 관련\"),
            Label(\"component/frontend\", \"5319e7\", \"💻 프론트엔드 관련\"),
            Label(\"component/backend\", \"1f883d\", \"⚙️ 백엔드 관련\"),
            Label(\"component/database\", \"b60205\", \"🗄️ 데이터베이스 관련\"),
            Label(\"component/infrastructure\", \"0e8a16\", \"🏗️ 인프라스트럭처 관련\"),
            Label(\"component/ci-cd\", \"006b75\", \"🔄 CI/CD 파이프라인\"),
            
            # 상태 라벨
            Label(\"status/needs-triage\", \"ededed\", \"🔍 분류가 필요함\"),
            Label(\"status/in-progress\", \"fbca04\", \"🚧 작업 진행 중\"),
            Label(\"status/blocked\", \"d73a4a\", \"🚫 차단됨\"),
            Label(\"status/needs-review\", \"0052cc\", \"👀 리뷰 필요\"),
            Label(\"status/ready-to-merge\", \"0e8a16\", \"✅ 병합 준비 완료\"),
            Label(\"status/on-hold\", \"fef2c0\", \"⏸️ 보류\"),
            
            # 난이도 라벨
            Label(\"difficulty/beginner\", \"c5f015\", \"🌱 초보자 친화적\"),
            Label(\"difficulty/intermediate\", \"fbca04\", \"📚 중급 수준\"),
            Label(\"difficulty/advanced\", \"d73a4a\", \"🎓 고급 수준\"),
            
            # 특별 라벨
            Label(\"good-first-issue\", \"7057ff\", \"👋 첫 기여자에게 좋은 이슈\"),
            Label(\"help-wanted\", \"008672\", \"🙋 도움이 필요합니다\"),
            Label(\"hacktoberfest\", \"ff6b6b\", \"🎃 Hacktoberfest 참여 가능\"),
            Label(\"breaking-change\", \"d73a4a\", \"💥 호환성을 깨뜨리는 변경\"),
            Label(\"security\", \"b60205\", \"🔒 보안 관련\"),
            Label(\"performance\", \"0e8a16\", \"⚡ 성능 개선\"),
            
            # 크기 라벨 (PR용)
            Label(\"size/XS\", \"c2e0c6\", \"🐭 매우 작은 변경 (1-10 라인)\"),
            Label(\"size/S\", \"a2eeef\", \"🐹 작은 변경 (10-50 라인)\"),
            Label(\"size/M\", \"fbca04\", \"🐱 중간 변경 (50-200 라인)\"),
            Label(\"size/L\", \"ff9500\", \"🐶 큰 변경 (200-500 라인)\"),
            Label(\"size/XL\", \"d73a4a\", \"🐘 매우 큰 변경 (500+ 라인)\"),
        ]
    
    def get_existing_labels(self) -> List[Dict]:
        \"\"\"기존 라벨 목록 조회\"\"\"
        url = f\"{self.base_url}/repos/{self.repo}/labels\"
        
        try:
            response = requests.get(url, headers=self.headers)
            response.raise_for_status()
            return response.json()
        except requests.exceptions.RequestException as e:
            print(f\"❌ 기존 라벨 조회 실패: {e}\")
            return []
    
    def create_label(self, label: Label) -> bool:
        \"\"\"새 라벨 생성\"\"\"
        url = f\"{self.base_url}/repos/{self.repo}/labels\"
        
        data = {
            \"name\": label.name,
            \"color\": label.color,
            \"description\": label.description
        }
        
        try:
            response = requests.post(url, headers=self.headers, json=data)
            response.raise_for_status()
            print(f\"✅ 라벨 생성됨: {label.name}\")
            return True
        except requests.exceptions.RequestException as e:
            if response.status_code == 422:  # 이미 존재하는 라벨
                print(f\"⚠️ 라벨 이미 존재: {label.name}\")
                return self.update_label(label)
            else:
                print(f\"❌ 라벨 생성 실패: {label.name} - {e}\")
                return False
    
    def update_label(self, label: Label) -> bool:
        \"\"\"기존 라벨 업데이트\"\"\"
        url = f\"{self.base_url}/repos/{self.repo}/labels/{label.name}\"
        
        data = {
            \"name\": label.name,
            \"color\": label.color,
            \"description\": label.description
        }
        
        try:
            response = requests.patch(url, headers=self.headers, json=data)
            response.raise_for_status()
            print(f\"🔄 라벨 업데이트됨: {label.name}\")
            return True
        except requests.exceptions.RequestException as e:
            print(f\"❌ 라벨 업데이트 실패: {label.name} - {e}\")
            return False
    
    def delete_label(self, label_name: str) -> bool:
        \"\"\"라벨 삭제\"\"\"
        url = f\"{self.base_url}/repos/{self.repo}/labels/{label_name}\"
        
        try:
            response = requests.delete(url, headers=self.headers)
            response.raise_for_status()
            print(f\"🗑️ 라벨 삭제됨: {label_name}\")
            return True
        except requests.exceptions.RequestException as e:
            print(f\"❌ 라벨 삭제 실패: {label_name} - {e}\")
            return False
    
    def setup_labels(self, clean: bool = False) -> None:
        \"\"\"MLOps 라벨 시스템 설정\"\"\"
        print(\"🏷️ GitHub 라벨 설정 시작...\")
        print(f\"📂 저장소: {self.repo}\")
        print(f\"🕒 시작 시간: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\")
        
        # 기존 라벨 조회
        existing_labels = self.get_existing_labels()
        existing_label_names = {label['name'] for label in existing_labels}
        
        print(f\"📊 기존 라벨 수: {len(existing_labels)}\")
        
        # 기본 라벨 제거 (선택적)
        if clean:
            default_labels_to_remove = {
                'bug', 'enhancement', 'question', 'duplicate', 
                'good first issue', 'help wanted', 'invalid', 'wontfix'
            }
            
            for label_name in existing_label_names & default_labels_to_remove:
                self.delete_label(label_name)
        
        # MLOps 라벨 생성/업데이트
        mlops_labels = self.get_mlops_labels()
        created_count = 0
        updated_count = 0
        
        for label in mlops_labels:
            if label.name in existing_label_names:
                if self.update_label(label):
                    updated_count += 1
            else:
                if self.create_label(label):
                    created_count += 1
        
        print(f\"\
📊 라벨 설정 완료:\")
        print(f\"  ✅ 생성된 라벨: {created_count}개\")
        print(f\"  🔄 업데이트된 라벨: {updated_count}개\")
        print(f\"  📋 총 MLOps 라벨: {len(mlops_labels)}개\")
        
    def list_labels(self) -> None:
        \"\"\"현재 라벨 목록 출력\"\"\"
        labels = self.get_existing_labels()
        
        print(f\"\
📋 현재 라벨 목록 ({len(labels)}개):\")
        print(\"=\" * 60)
        
        # 카테고리별로 그룹화
        categories = {
            'Priority': [],
            'Type': [],
            'Stage': [],
            'Component': [],
            'Status': [],
            'Difficulty': [],
            'Size': [],
            'Special': []
        }
        
        for label in labels:
            name = label['name']
            if name.startswith('priority/'):
                categories['Priority'].append(label)
            elif name.startswith('type/'):
                categories['Type'].append(label)
            elif name.startswith('stage/'):
                categories['Stage'].append(label)
            elif name.startswith('component/'):
                categories['Component'].append(label)
            elif name.startswith('status/'):
                categories['Status'].append(label)
            elif name.startswith('difficulty/'):
                categories['Difficulty'].append(label)
            elif name.startswith('size/'):
                categories['Size'].append(label)
            else:
                categories['Special'].append(label)
        
        for category, cat_labels in categories.items():
            if cat_labels:
                print(f\"\
{category} ({len(cat_labels)}개):\")
                for label in sorted(cat_labels, key=lambda x: x['name']):
                    color = f\"#{label['color']}\"
                    desc = label.get('description', 'No description')
                    print(f\"  🏷️ {label['name']:<25} {color:<8} {desc}\")

def main():
    parser = argparse.ArgumentParser(
        description=\"GitHub 라벨 설정 스크립트\",
        formatter_class=argparse.RawDescriptionHelpFormatter,
        epilog=\"\"\"
사용 예시:
  # 환경 변수 설정 후 라벨 설정
  export GITHUB_TOKEN=\"your_token_here\"
  export GITHUB_REPO=\"username/movie-mlops\"
  python setup_github_labels.py setup
  
  # 직접 토큰과 저장소 지정
  python setup_github_labels.py setup --token YOUR_TOKEN --repo username/movie-mlops
  
  # 기존 기본 라벨 제거하고 설정
  python setup_github_labels.py setup --clean
  
  # 현재 라벨 목록 확인
  python setup_github_labels.py list
\"\"\"
    )
    
    subparsers = parser.add_subparsers(dest='command', help='사용 가능한 명령어')
    
    # setup 명령어
    setup_parser = subparsers.add_parser('setup', help='MLOps 라벨 시스템 설정')
    setup_parser.add_argument('--token', help='GitHub Personal Access Token')
    setup_parser.add_argument('--repo', help='GitHub 저장소 (username/repo)')
    setup_parser.add_argument('--clean', action='store_true', help='기본 라벨 제거')
    
    # list 명령어
    list_parser = subparsers.add_parser('list', help='현재 라벨 목록 조회')
    list_parser.add_argument('--token', help='GitHub Personal Access Token')
    list_parser.add_argument('--repo', help='GitHub 저장소 (username/repo)')
    
    args = parser.parse_args()
    
    if not args.command:
        parser.print_help()
        return
    
    # 토큰과 저장소 설정
    token = args.token or os.getenv('GITHUB_TOKEN')
    repo = args.repo or os.getenv('GITHUB_REPO')
    
    if not token:
        print(\"❌ GitHub 토큰이 필요합니다.\")
        print(\"   환경 변수 GITHUB_TOKEN을 설정하거나 --token 옵션을 사용하세요.\")
        sys.exit(1)
    
    if not repo:
        print(\"❌ GitHub 저장소가 필요합니다.\")
        print(\"   환경 변수 GITHUB_REPO를 설정하거나 --repo 옵션을 사용하세요.\")
        print(\"   형식: username/repository\")
        sys.exit(1)
    
    # GitHub 라벨 관리자 초기화
    try:
        manager = GitHubLabelsManager(token, repo)
        
        if args.command == 'setup':
            manager.setup_labels(clean=getattr(args, 'clean', False))
        elif args.command == 'list':
            manager.list_labels()
    
    except Exception as e:
        print(f\"❌ 오류 발생: {e}\")
        sys.exit(1)

if __name__ == \"__main__\":
    main()
EOF

    chmod +x scripts/setup_github_labels.py

    # 저장소 설정 스크립트
    cat > scripts/setup_repository.sh << 'EOF'
#!/bin/bash

# =================================================================
# GitHub 저장소 설정 스크립트
# Movie MLOps 프로젝트용 저장소 초기 설정을 자동화
# =================================================================

set -e

# 색상 정의
RED='\\033[0;31m'
GREEN='\\033[0;32m'
YELLOW='\\033[1;33m'
BLUE='\\033[0;34m'
NC='\\033[0m' # No Color

# 로그 함수
log_info() { echo -e \"${BLUE}ℹ️  $1${NC}\"; }
log_success() { echo -e \"${GREEN}✅ $1${NC}\"; }
log_warning() { echo -e \"${YELLOW}⚠️  $1${NC}\"; }
log_error() { echo -e \"${RED}❌ $1${NC}\"; }

echo \"🚀 GitHub 저장소 설정 시작...\"
echo \"📍 현재 위치: $(pwd)\"
echo \"🕒 시작 시간: $(date)\"
echo \"==================================================\"

# Git 설정 확인
check_git_config() {
    log_info \"Git 설정 확인 중...\"
    
    # Git 사용자 설정 확인
    if ! git config user.name >/dev/null 2>&1; then
        log_warning \"Git 사용자 이름이 설정되지 않았습니다.\"
        read -p \"Git 사용자 이름을 입력하세요: \" git_name
        git config --global user.name \"$git_name\"
        log_success \"Git 사용자 이름 설정: $git_name\"
    else
        log_success \"Git 사용자 이름: $(git config user.name)\"
    fi
    
    if ! git config user.email >/dev/null 2>&1; then
        log_warning \"Git 사용자 이메일이 설정되지 않았습니다.\"
        read -p \"Git 사용자 이메일을 입력하세요: \" git_email
        git config --global user.email \"$git_email\"
        log_success \"Git 사용자 이메일 설정: $git_email\"
    else
        log_success \"Git 사용자 이메일: $(git config user.email)\"
    fi
}

# Git 저장소 초기화
init_git_repository() {
    log_info \"Git 저장소 초기화 중...\"
    
    if [ ! -d \".git\" ]; then
        git init
        log_success \"Git 저장소 초기화 완료\"
    else
        log_success \"Git 저장소 이미 초기화됨\"
    fi
    
    # 기본 브랜치를 main으로 설정
    current_branch=$(git branch --show-current 2>/dev/null || echo \"\")
    if [ \"$current_branch\" != \"main\" ] && [ -n \"$current_branch\" ]; then
        git branch -m \"$current_branch\" main
        log_success \"기본 브랜치를 main으로 변경\"
    elif [ -z \"$current_branch\" ]; then
        # 첫 커밋이 없는 경우
        log_info \"첫 커밋 생성을 위해 대기 중...\"
    fi
}

# 원격 저장소 설정
setup_remote_repository() {
    log_info \"원격 저장소 설정 중...\"
    
    # 기존 원격 저장소 확인
    if git remote get-url origin >/dev/null 2>&1; then
        current_origin=$(git remote get-url origin)
        log_success \"원격 저장소 이미 설정됨: $current_origin\"
        
        read -p \"원격 저장소를 변경하시겠습니까? (y/N): \" change_remote
        if [[ \"$change_remote\" =~ ^[Yy]$ ]]; then
            read -p \"새 원격 저장소 URL을 입력하세요: \" new_origin
            git remote set-url origin \"$new_origin\"
            log_success \"원격 저장소 URL 변경됨: $new_origin\"
        fi
    else
        read -p \"GitHub 저장소 URL을 입력하세요 (https://github.com/username/movie-mlops.git): \" origin_url
        if [ -n \"$origin_url\" ]; then
            git remote add origin \"$origin_url\"
            log_success \"원격 저장소 추가됨: $origin_url\"
        else
            log_warning \"원격 저장소 설정을 건너뜁니다.\"
        fi
    fi
}

# 첫 커밋 생성
create_initial_commit() {
    log_info \"첫 커밋 생성 중...\"
    
    # 스테이징 영역에 파일 추가
    git add .
    
    # 커밋할 파일이 있는지 확인
    if git diff --staged --quiet; then
        log_warning \"커밋할 변경사항이 없습니다.\"
        return
    fi
    
    # 첫 커밋 생성
    if ! git log --oneline -1 >/dev/null 2>&1; then
        git commit -m \"feat: initial commit with project structure

- Add comprehensive README.md with project overview
- Add CONTRIBUTING.md with development guidelines
- Add MIT LICENSE
- Add .gitignore for Python/MLOps projects
- Add GitHub issue and PR templates
- Add CODEOWNERS for code review management
- Add GitHub Labels setup script
- Add repository setup automation scripts

This establishes the foundation for the Movie MLOps project
with proper documentation, collaboration tools, and automation.\"
        log_success \"첫 커밋 생성 완료\"
    else
        # 기존 커밋이 있는 경우 추가 커밋
        git commit -m \"docs: update repository setup and documentation

- Update project documentation and templates
- Enhance GitHub workflow templates
- Improve automation scripts\"
        log_success \"저장소 업데이트 커밋 완료\"
    fi
}

# 브랜치 푸시
push_to_remote() {
    log_info \"원격 저장소로 푸시 중...\"
    
    if ! git remote get-url origin >/dev/null 2>&1; then
        log_warning \"원격 저장소가 설정되지 않아 푸시를 건너뜁니다.\"
        return
    fi
    
    # 원격 저장소 연결 테스트
    if ! git ls-remote origin >/dev/null 2>&1; then
        log_error \"원격 저장소에 연결할 수 없습니다.\"
        log_info \"다음을 확인해 주세요:\"
        echo \"  1. GitHub 저장소가 생성되었는지 확인\"
        echo \"  2. 저장소 URL이 올바른지 확인\"
        echo \"  3. GitHub 계정에 푸시 권한이 있는지 확인\"
        return
    fi
    
    # 현재 브랜치 확인
    current_branch=$(git branch --show-current)
    
    # 푸시 실행
    if git push -u origin \"$current_branch\" 2>/dev/null; then
        log_success \"원격 저장소로 푸시 완료\"
    else
        log_warning \"푸시에 실패했습니다. 수동으로 다음 명령을 실행해 주세요:\"
        echo \"  git push -u origin $current_branch\"
    fi
}

# GitHub CLI 설정 확인
check_github_cli() {
    log_info \"GitHub CLI 확인 중...\"
    
    if command -v gh >/dev/null 2>&1; then
        if gh auth status >/dev/null 2>&1; then
            log_success \"GitHub CLI 인증됨\"
            
            # 저장소 정보 표시
            if gh repo view >/dev/null 2>&1; then
                repo_info=$(gh repo view --json name,owner,url)
                repo_name=$(echo \"$repo_info\" | grep -o '\"name\":\"[^\"]*\"' | cut -d'\"' -f4)
                repo_owner=$(echo \"$repo_info\" | grep -o '\"login\":\"[^\"]*\"' | cut -d'\"' -f4)
                repo_url=$(echo \"$repo_info\" | grep -o '\"url\":\"[^\"]*\"' | cut -d'\"' -f4)
                
                log_success \"저장소 정보:\"
                echo \"  📂 이름: $repo_name\"
                echo \"  👤 소유자: $repo_owner\"
                echo \"  🔗 URL: $repo_url\"
            fi
        else
            log_warning \"GitHub CLI가 인증되지 않았습니다.\"
            echo \"  다음 명령으로 인증하세요: gh auth login\"
        fi
    else
        log_info \"GitHub CLI가 설치되지 않았습니다.\"
        echo \"  설치 방법: https://cli.github.com/\"
    fi
}

# 라벨 설정
setup_github_labels() {
    log_info \"GitHub 라벨 설정 확인 중...\"
    
    if [ -f \"scripts/setup_github_labels.py\" ]; then
        log_success \"라벨 설정 스크립트 존재\"
        
        if [ -n \"${GITHUB_TOKEN:-}\" ] && [ -n \"${GITHUB_REPO:-}\" ]; then
            log_info \"GitHub 라벨 설정 실행 중...\"
            python scripts/setup_github_labels.py setup
            log_success \"GitHub 라벨 설정 완료\"
        else
            log_warning \"GitHub 라벨 설정을 위해 환경 변수가 필요합니다:\"
            echo \"  export GITHUB_TOKEN='your_token_here'\"
            echo \"  export GITHUB_REPO='username/movie-mlops'\"
            echo \"  python scripts/setup_github_labels.py setup\"
        fi
    else
        log_warning \"라벨 설정 스크립트를 찾을 수 없습니다.\"
    fi
}

# 설정 검증
validate_setup() {
    log_info \"저장소 설정 검증 중...\"
    
    local issues=0
    
    # 필수 파일 확인
    required_files=(
        \"README.md\"
        \"CONTRIBUTING.md\"
        \"LICENSE\"
        \".gitignore\"
        \".github/PULL_REQUEST_TEMPLATE.md\"
        \".github/CODEOWNERS\"
    )
    
    for file in \"${required_files[@]}\"; do
        if [ -f \"$file\" ]; then
            log_success \"$file 존재\"
        else
            log_error \"$file 누락\"
            ((issues++))
        fi
    done
    
    # Git 설정 확인
    if git config user.name >/dev/null && git config user.email >/dev/null; then
        log_success \"Git 사용자 설정 완료\"
    else
        log_error \"Git 사용자 설정 미완료\"
        ((issues++))
    fi
    
    # 원격 저장소 확인
    if git remote get-url origin >/dev/null 2>&1; then
        log_success \"원격 저장소 설정됨\"
    else
        log_warning \"원격 저장소 설정되지 않음\"
    fi
    
    # 결과 요약
    echo \"\"
    if [ $issues -eq 0 ]; then
        log_success \"저장소 설정 검증 완료! 모든 필수 구성 요소가 준비되었습니다.\"
    else
        log_warning \"$issues개의 문제가 발견되었습니다. 위의 오류를 확인해 주세요.\"
    fi
}

# 다음 단계 안내
show_next_steps() {
    log_info \"다음 단계 안내\"
    
    echo \"\"
    echo \"🎉 저장소 설정이 완료되었습니다!\"
    echo \"\"
    echo \"📋 다음 단계:\"
    echo \"  1. GitHub에서 저장소 생성 (아직 안 했다면)\"
    echo \"  2. 브랜치 보호 규칙 설정\"
    echo \"     - Settings > Branches > Add rule\"
    echo \"     - Branch name pattern: main\"
    echo \"     - Require pull request reviews\"
    echo \"     - Require status checks to pass\"
    echo \"\"
    echo \"  3. 협업자 초대\"
    echo \"     - Settings > Manage access > Invite a collaborator\"
    echo \"\"
    echo \"  4. GitHub Actions 워크플로우 활성화\"
    echo \"     - Actions 탭에서 워크플로우 확인 및 활성화\"
    echo \"\"
    echo \"  5. 라벨 설정 (선택사항)\"
    if [ -n \"${GITHUB_TOKEN:-}\" ] && [ -n \"${GITHUB_REPO:-}\" ]; then
        echo \"     python scripts/setup_github_labels.py setup\"
    else
        echo \"     export GITHUB_TOKEN='your_token'\"
        echo \"     export GITHUB_REPO='username/movie-mlops'\"
        echo \"     python scripts/setup_github_labels.py setup\"
    fi
    echo \"\"
    echo \"🔗 유용한 링크:\"
    if git remote get-url origin >/dev/null 2>&1; then
        origin_url=$(git remote get-url origin)
        echo \"  📂 저장소: $origin_url\"
        echo \"  📋 이슈: ${origin_url}/issues\"
        echo \"  🔀 PR: ${origin_url}/pulls\"
        echo \"  ⚙️ 설정: ${origin_url}/settings\"
    fi
    echo \"  📚 GitHub 문서: https://docs.github.com/\"
}

# 메인 실행 함수
main() {
    # Git 설정 확인
    check_git_config
    
    # Git 저장소 초기화
    init_git_repository
    
    # 원격 저장소 설정
    setup_remote_repository
    
    # 첫 커밋 생성
    create_initial_commit
    
    # 원격 저장소로 푸시
    push_to_remote
    
    # GitHub CLI 확인
    check_github_cli
    
    # 라벨 설정
    setup_github_labels
    
    # 설정 검증
    validate_setup
    
    # 다음 단계 안내
    show_next_steps
}

# 도움말 함수
show_help() {
    cat << 'HELP_EOF'
🚀 GitHub 저장소 설정 스크립트

사용법:
  bash scripts/setup_repository.sh [옵션]

옵션:
  -h, --help     이 도움말 표시
  --skip-remote  원격 저장소 설정 건너뛰기
  --skip-push    푸시 과정 건너뛰기
  --skip-labels  라벨 설정 건너뛰기

환경 변수:
  GITHUB_TOKEN   GitHub Personal Access Token
  GITHUB_REPO    GitHub 저장소 (username/repo)

예시:
  # 기본 실행
  bash scripts/setup_repository.sh
  
  # 라벨 설정 포함
  export GITHUB_TOKEN="ghp_xxxxx"
  export GITHUB_REPO="username/movie-mlops"
  bash scripts/setup_repository.sh

HELP_EOF
}

# 명령행 인수 처리
SKIP_REMOTE=false
SKIP_PUSH=false
SKIP_LABELS=false

while [[ $# -gt 0 ]]; do
    case $1 in
        -h|--help)
            show_help
            exit 0
            ;;
        --skip-remote)
            SKIP_REMOTE=true
            shift
            ;;
        --skip-push)
            SKIP_PUSH=true
            shift
            ;;
        --skip-labels)
            SKIP_LABELS=true
            shift
            ;;
        *)
            log_error "알 수 없는 옵션: $1"
            echo "도움말을 보려면 -h 또는 --help를 사용하세요."
            exit 1
            ;;
    esac
done

# 스크립트 실행
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    main
fi
EOF

    chmod +x scripts/setup_repository.sh

    # 생성된 파일 목록 저장
    {
        echo "scripts/setup_github_labels.py"
        echo "scripts/setup_repository.sh"
    } >> "$GENERATED_FILES_LIST"

    log_success "GitHub 관리 스크립트 생성 완료"
}

run_comprehensive_tests() {
    log_info "포괄적 테스트 실행 중..."
    
    local start_time=$(date +%s)
    local test_count=0
    local passed_count=0
    local failed_count=0
    
    # 테스트 1: 기본 파일 존재 확인
    ((test_count++))
    log_info "테스트 $test_count: 기본 파일 존재 확인"
    
    local required_files=(
        "README.md"
        "CONTRIBUTING.md"
        "LICENSE"
        ".gitignore"
        ".github/ISSUE_TEMPLATE/bug_report.yml"
        ".github/ISSUE_TEMPLATE/feature_request.yml"
        ".github/PULL_REQUEST_TEMPLATE.md"
        ".github/CODEOWNERS"
        "scripts/setup_github_labels.py"
        "scripts/setup_repository.sh"
    )
    
    local missing_files=()
    for file in "${required_files[@]}"; do
        if [ ! -f "$file" ]; then
            missing_files+=("$file")
        fi
    done
    
    if [ ${#missing_files[@]} -eq 0 ]; then
        log_success "테스트 $test_count 통과: 모든 기본 파일 존재"
        ((passed_count++))
        TEST_RESULTS["basic_files"]="PASS"
    else
        log_error "테스트 $test_count 실패: 누락된 파일 ${missing_files[*]}"
        ((failed_count++))
        TEST_RESULTS["basic_files"]="FAIL"
    fi
    
    # 테스트 2: 파일 내용 검증
    ((test_count++))
    log_info "테스트 $test_count: 파일 내용 검증"
    
    local content_errors=()
    
    # README.md 검증
    if [ -f "README.md" ]; then
        if ! grep -q "Movie MLOps Project" README.md; then
            content_errors+=("README.md: 프로젝트 제목 누락")
        fi
        if ! grep -q "🎬 프로젝트 개요" README.md; then
            content_errors+=("README.md: 프로젝트 개요 섹션 누락")
        fi
        if ! grep -q "🚀 빠른 시작" README.md; then
            content_errors+=("README.md: 빠른 시작 섹션 누락")
        fi
    fi
    
    # CONTRIBUTING.md 검증
    if [ -f "CONTRIBUTING.md" ]; then
        if ! grep -q "기여 가이드" CONTRIBUTING.md; then
            content_errors+=("CONTRIBUTING.md: 제목 누락")
        fi
        if ! grep -q "🤝 기여 방법" CONTRIBUTING.md; then
            content_errors+=("CONTRIBUTING.md: 기여 방법 섹션 누락")
        fi
    fi
    
    # LICENSE 검증
    if [ -f "LICENSE" ]; then
        if ! grep -q "MIT License" LICENSE; then
            content_errors+=("LICENSE: MIT 라이선스 누락")
        fi
    fi
    
    if [ ${#content_errors[@]} -eq 0 ]; then
        log_success "테스트 $test_count 통과: 모든 파일 내용 정상"
        ((passed_count++))
        TEST_RESULTS["file_content"]="PASS"
    else
        log_error "테스트 $test_count 실패: 내용 오류 ${content_errors[*]}"
        ((failed_count++))
        TEST_RESULTS["file_content"]="FAIL"
    fi
    
    # 테스트 3: 스크립트 실행 가능성 확인
    ((test_count++))
    log_info "테스트 $test_count: 스크립트 실행 가능성 확인"
    
    local script_errors=()
    
    # Python 스크립트 문법 검사
    if [ -f "scripts/setup_github_labels.py" ]; then
        if command -v python3 >/dev/null; then
            if ! python3 -m py_compile scripts/setup_github_labels.py 2>/dev/null; then
                script_errors+=("setup_github_labels.py: Python 문법 오류")
            fi
        else
            log_warning "Python3가 설치되지 않아 문법 검사를 건너뜁니다"
        fi
        
        if [ ! -x "scripts/setup_github_labels.py" ]; then
            script_errors+=("setup_github_labels.py: 실행 권한 없음")
        fi
    fi
    
    # Bash 스크립트 문법 검사
    if [ -f "scripts/setup_repository.sh" ]; then
        if ! bash -n scripts/setup_repository.sh 2>/dev/null; then
            script_errors+=("setup_repository.sh: Bash 문법 오류")
        fi
        
        if [ ! -x "scripts/setup_repository.sh" ]; then
            script_errors+=("setup_repository.sh: 실행 권한 없음")
        fi
    fi
    
    if [ ${#script_errors[@]} -eq 0 ]; then
        log_success "테스트 $test_count 통과: 모든 스크립트 실행 가능"
        ((passed_count++))
        TEST_RESULTS["script_executable"]="PASS"
    else
        log_error "테스트 $test_count 실패: 스크립트 오류 ${script_errors[*]}"
        ((failed_count++))
        TEST_RESULTS["script_executable"]="FAIL"
    fi
    
    # 테스트 4: Git 구성 확인
    ((test_count++))
    log_info "테스트 $test_count: Git 구성 확인"
    
    local git_errors=()
    
    if [ ! -d ".git" ]; then
        git_errors+=("Git 저장소가 초기화되지 않음")
    fi
    
    # .gitignore 파일 내용 확인
    if [ -f ".gitignore" ]; then
        local gitignore_patterns=(
            "__pycache__/"
            "*.pyc"
            ".env"
            "venv/"
            "mlruns/"
            "*.log"
        )
        
        for pattern in "${gitignore_patterns[@]}"; do
            if ! grep -q "$pattern" .gitignore; then
                git_errors+=("gitignore에서 $pattern 패턴 누락")
            fi
        done
    fi
    
    if [ ${#git_errors[@]} -eq 0 ]; then
        log_success "테스트 $test_count 통과: Git 구성 정상"
        ((passed_count++))
        TEST_RESULTS["git_config"]="PASS"
    else
        log_error "테스트 $test_count 실패: Git 오류 ${git_errors[*]}"
        ((failed_count++))
        TEST_RESULTS["git_config"]="FAIL"
    fi
    
    # 테스트 5: GitHub 템플릿 구조 확인
    ((test_count++))
    log_info "테스트 $test_count: GitHub 템플릿 구조 확인"
    
    local template_errors=()
    
    # 이슈 템플릿 확인
    if [ -f ".github/ISSUE_TEMPLATE/bug_report.yml" ]; then
        if ! grep -q "name: 🐛 Bug Report" .github/ISSUE_TEMPLATE/bug_report.yml; then
            template_errors+=("bug_report.yml: 이름 누락")
        fi
        if ! grep -q "description:" .github/ISSUE_TEMPLATE/bug_report.yml; then
            template_errors+=("bug_report.yml: 설명 누락")
        fi
    fi
    
    if [ -f ".github/ISSUE_TEMPLATE/feature_request.yml" ]; then
        if ! grep -q "name: 🚀 Feature Request" .github/ISSUE_TEMPLATE/feature_request.yml; then
            template_errors+=("feature_request.yml: 이름 누락")
        fi
    fi
    
    # PR 템플릿 확인
    if [ -f ".github/PULL_REQUEST_TEMPLATE.md" ]; then
        if ! grep -q "## 📋 변경 사항 요약" .github/PULL_REQUEST_TEMPLATE.md; then
            template_errors+=("PR 템플릿: 변경 사항 요약 섹션 누락")
        fi
        if ! grep -q "## ✅ 체크리스트" .github/PULL_REQUEST_TEMPLATE.md; then
            template_errors+=("PR 템플릿: 체크리스트 섹션 누락")
        fi
    fi
    
    # CODEOWNERS 확인
    if [ -f ".github/CODEOWNERS" ]; then
        if ! grep -q "# Movie MLOps Project - Code Owners" .github/CODEOWNERS; then
            template_errors+=("CODEOWNERS: 헤더 누락")
        fi
        if ! grep -q "\* @movie-mlops-team" .github/CODEOWNERS; then
            template_errors+=("CODEOWNERS: 전역 소유자 누락")
        fi
    fi
    
    if [ ${#template_errors[@]} -eq 0 ]; then
        log_success "테스트 $test_count 통과: 모든 GitHub 템플릿 구조 정상"
        ((passed_count++))
        TEST_RESULTS["github_templates"]="PASS"
    else
        log_error "테스트 $test_count 실패: 템플릿 오류 ${template_errors[*]}"
        ((failed_count++))
        TEST_RESULTS["github_templates"]="FAIL"
    fi
    
    # 성능 메트릭 계산
    local end_time=$(date +%s)
    local duration=$((end_time - start_time))
    PERFORMANCE_METRICS["test_duration"]="${duration}s"
    PERFORMANCE_METRICS["files_created"]=$(wc -l < "$GENERATED_FILES_LIST")
    PERFORMANCE_METRICS["total_tests"]="$test_count"
    PERFORMANCE_METRICS["passed_tests"]="$passed_count"
    PERFORMANCE_METRICS["failed_tests"]="$failed_count"
    PERFORMANCE_METRICS["success_rate"]="$(( (passed_count * 100) / test_count ))%"
    
    log_success "포괄적 테스트 완료"
}

generate_test_report() {
    log_info "테스트 리포트 생성 중..."
    
    # JSON 리포트 생성
    cat > "$TEST_REPORT" << EOF
{
  "test_info": {
    "title": "3.7 GitHub Repository Setup 테스트 리포트",
    "timestamp": "$(date -Iseconds)",
    "environment": {
      "os": "$(uname -s)",
      "kernel": "$(uname -r)",
      "git_version": "$(git --version)",
      "python_version": "$(python3 --version 2>/dev/null || echo 'Not available')",
      "bash_version": "$BASH_VERSION"
    }
  },
  "test_results": {
EOF

    local first=true
    for test_name in "${!TEST_RESULTS[@]}"; do
        if [ "$first" = true ]; then
            first=false
        else
            echo "," >> "$TEST_REPORT"
        fi
        echo "    \"$test_name\": \"${TEST_RESULTS[$test_name]}\"" >> "$TEST_REPORT"
    done

    cat >> "$TEST_REPORT" << EOF
  },
  "performance_metrics": {
EOF

    first=true
    for metric_name in "${!PERFORMANCE_METRICS[@]}"; do
        if [ "$first" = true ]; then
            first=false
        else
            echo "," >> "$TEST_REPORT"
        fi
        echo "    \"$metric_name\": \"${PERFORMANCE_METRICS[$metric_name]}\"" >> "$TEST_REPORT"
    done

    cat >> "$TEST_REPORT" << EOF
  },
  "generated_files": [
EOF

    first=true
    while IFS= read -r file; do
        if [ "$first" = true ]; then
            first=false
        else
            echo "," >> "$TEST_REPORT"
        fi
        echo "    \"$file\"" >> "$TEST_REPORT"
    done < "$GENERATED_FILES_LIST"

    cat >> "$TEST_REPORT" << EOF
  ]
}
EOF

    log_success "테스트 리포트 생성 완료: $TEST_REPORT"
}

show_test_summary() {
    log_info "테스트 요약 표시"
    
    echo ""
    echo "=================================================="
    echo "🎯 3.7 GitHub Repository Setup 테스트 완료"
    echo "=================================================="
    echo ""
    echo "📊 테스트 결과:"
    echo "  • 총 테스트: ${PERFORMANCE_METRICS[total_tests]}"
    echo "  • 성공: ${PERFORMANCE_METRICS[passed_tests]}"
    echo "  • 실패: ${PERFORMANCE_METRICS[failed_tests]}"
    echo "  • 성공률: ${PERFORMANCE_METRICS[success_rate]}"
    echo ""
    echo "⏱️ 성능 메트릭:"
    echo "  • 실행 시간: ${PERFORMANCE_METRICS[test_duration]}"
    echo "  • 생성된 파일: ${PERFORMANCE_METRICS[files_created]}개"
    echo ""
    echo "📁 생성된 주요 파일:"
    echo "  • README.md - 프로젝트 개요 및 가이드"
    echo "  • CONTRIBUTING.md - 기여 가이드라인"
    echo "  • LICENSE - MIT 라이선스"
    echo "  • .gitignore - Git 무시 패턴"
    echo "  • GitHub 템플릿 (이슈, PR, CODEOWNERS)"
    echo "  • 자동화 스크립트 (라벨 설정, 저장소 설정)"
    echo ""
    echo "📋 상세 결과:"
    for test_name in "${!TEST_RESULTS[@]}"; do
        local status="${TEST_RESULTS[$test_name]}"
        local icon="❌"
        if [ "$status" = "PASS" ]; then
            icon="✅"
        fi
        echo "  $icon $test_name: $status"
    done
    echo ""
    echo "📄 상세 리포트: $TEST_REPORT"
    echo "📝 테스트 로그: $TEST_LOG"
    echo "📂 생성된 파일 목록: $GENERATED_FILES_LIST"
    echo ""
    
    if [ "${PERFORMANCE_METRICS[failed_tests]}" -eq 0 ]; then
        echo "🎉 모든 테스트가 성공적으로 완료되었습니다!"
        echo "   GitHub 저장소 설정이 준비되었습니다."
    else
        echo "⚠️ 일부 테스트가 실패했습니다."
        echo "   위의 결과를 확인하고 문제를 해결해 주세요."
    fi
    
    echo ""
    echo "🔗 다음 단계:"
    echo "  1. GitHub에서 새 저장소 생성"
    echo "  2. scripts/setup_repository.sh 실행"
    echo "  3. GitHub 라벨 설정 (scripts/setup_github_labels.py)"
    echo "  4. 브랜치 보호 규칙 설정"
    echo "  5. 협업자 초대 및 권한 설정"
    echo ""
    echo "=================================================="
}

cleanup_on_exit() {
    local exit_code=$?
    
    log_info "정리 작업 수행 중..."
    
    # 임시 파일 정리 (있다면)
    # rm -f /tmp/github_setup_*
    
    if [ $exit_code -eq 0 ]; then
        log_success "3.7 GitHub Repository Setup 테스트가 성공적으로 완료되었습니다!"
    else
        log_error "3.7 GitHub Repository Setup 테스트가 오류와 함께 종료되었습니다 (종료 코드: $exit_code)"
    fi
    
    echo "📍 작업 위치: $(pwd)"
    echo "🕒 종료 시간: $(date)"
}

# =================================================================
# 메인 실행 로직
# =================================================================

# 종료 시 정리 작업 등록
trap cleanup_on_exit EXIT

# 메인 테스트 흐름
log_info "=== 3.7 GitHub Repository Setup 자동 설정 시작 ==="

# 1. Git 환경 설정
setup_git_environment

# 2. 저장소 기본 파일 생성
create_repository_files

# 3. GitHub 템플릿 생성
create_github_templates

# 4. GitHub 관리 스크립트 생성
create_github_scripts

# 5. 포괄적 테스트 실행
run_comprehensive_tests

# 6. 테스트 리포트 생성
generate_test_report

# 7. 테스트 요약 표시
show_test_summary

log_success "3.7 GitHub Repository Setup 완전 자동화 설정 및 테스트 완료!"

# 로그 파일에 최종 결과 기록
{
    echo ""
    echo "=================================================="
    echo "최종 테스트 결과: $(date)"
    echo "성공률: ${PERFORMANCE_METRICS[success_rate]}"
    echo "실행 시간: ${PERFORMANCE_METRICS[test_duration]}"
    echo "생성된 파일: ${PERFORMANCE_METRICS[files_created]}개"
    echo "=================================================="
} >> "$TEST_LOG"