# 3.1 Git ì›Œí¬í”Œë¡œìš° ì „ëµ ì„¤ì •

## ğŸ“‹ ê°œìš”

**ëª©í‘œ**: íŒ€ ì „ì²´ê°€ ì¼ê´€ëœ Git ì›Œí¬í”Œë¡œìš°ë¥¼ ì‚¬ìš©í•˜ì—¬ íš¨ìœ¨ì  í˜‘ì—… í™˜ê²½ êµ¬ì¶•  
**ì†Œìš” ì‹œê°„**: 2-3ì‹œê°„  
**ë‚œì´ë„**: ì¤‘ê¸‰

WSL Ubuntu í™˜ê²½ì—ì„œ Docker ê¸°ë°˜ìœ¼ë¡œ MLOps í”„ë¡œì íŠ¸ì— ìµœì í™”ëœ Git ì›Œí¬í”Œë¡œìš° ì „ëµì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

---

## ğŸ¯ 1. ì›Œí¬í”Œë¡œìš° ì „ëµ ì„ íƒ

### 1.1 GitHub Flow vs GitFlow ë¹„êµ

| íŠ¹ì§• | GitHub Flow | GitFlow |
|------|-------------|---------|
| **ë³µì¡ë„** | ë‹¨ìˆœ | ë³µì¡ |
| **ë¸Œëœì¹˜ ìˆ˜** | ì ìŒ (main + feature) | ë§ìŒ (main, develop, feature, release, hotfix) |
| **ë¦´ë¦¬ìŠ¤ ì£¼ê¸°** | ì§€ì†ì  ë°°í¬ | ì •ê¸° ë¦´ë¦¬ìŠ¤ |
| **íŒ€ í¬ê¸°** | ì†Œê·œëª¨ ~ ì¤‘ê·œëª¨ | ëŒ€ê·œëª¨ |
| **í•™ìŠµ ë‚œì´ë„** | ì‰¬ì›€ | ì–´ë ¤ì›€ |
| **MLOps ì í•©ì„±** | â­â­â­â­â­ | â­â­â­ |

### 1.2 MLOps í”„ë¡œì íŠ¸ì— GitHub Flow ì„ íƒ ì´ìœ 

```bash
# MLOps í”„ë¡œì íŠ¸ íŠ¹ì„± ë¶„ì„
echo "ğŸ¯ MLOps í”„ë¡œì íŠ¸ì— GitHub Flowê°€ ì í•©í•œ ì´ìœ :"
echo "  1. ì§€ì†ì  ì‹¤í—˜ ë° ë°˜ë³µ ê°œë°œ"
echo "  2. ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘ê³¼ í…ŒìŠ¤íŠ¸"
echo "  3. ë°ì´í„°ì™€ ëª¨ë¸ì˜ ë²„ì „ ê´€ë¦¬"
echo "  4. Docker ê¸°ë°˜ ì»¨í…Œì´ë„ˆ í™˜ê²½"
echo "  5. ë‹¨ê³„ë³„ êµ¬í˜„ (9ë‹¨ê³„ ì•„í‚¤í…ì²˜)"
```

### 1.3 ì›Œí¬í”Œë¡œìš° ì „ëµ ë¬¸ì„œí™”

```bash
# WSL Ubuntu í™˜ê²½ì—ì„œ ì‹¤í–‰
cd /mnt/c/dev/movie-mlops

# ì›Œí¬í”Œë¡œìš° ì „ëµ ë¬¸ì„œ ìƒì„±
cat > .github/workflows/WORKFLOW_STRATEGY.md << 'EOF'
# MLOps Git ì›Œí¬í”Œë¡œìš° ì „ëµ

## ğŸ¯ í•µì‹¬ ì›ì¹™

### 1. GitHub Flow ê¸°ë°˜
- **main ë¸Œëœì¹˜**: í•­ìƒ ë°°í¬ ê°€ëŠ¥í•œ ìƒíƒœ ìœ ì§€
- **feature ë¸Œëœì¹˜**: ê¸°ëŠ¥ë³„ ë…ë¦½ì  ê°œë°œ
- **Pull Request**: ëª¨ë“  ë³€ê²½ì‚¬í•­ì€ PRì„ í†µí•´
- **ì§€ì†ì  í†µí•©**: CI/CDë¥¼ í†µí•œ í’ˆì§ˆ ë³´ì¥

### 2. MLOps íŠ¹í™” ê·œì¹™
- **ë‹¨ê³„ë³„ ê°œë°œ**: 9ë‹¨ê³„ ì•„í‚¤í…ì²˜ì— ë”°ë¥¸ ì²´ê³„ì  êµ¬í˜„
- **ë°ì´í„° ë²„ì „ ê´€ë¦¬**: DVC ë˜ëŠ” íŒŒì¼ ê¸°ë°˜ ë²„ì „ ê´€ë¦¬
- **ì‹¤í—˜ ì¶”ì **: ë¸Œëœì¹˜ëª…ì— ì‹¤í—˜ ì •ë³´ í¬í•¨
- **Docker í†µí•©**: ëª¨ë“  ê°œë°œì´ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ

## ğŸŒ¿ ë¸Œëœì¹˜ ì „ëµ

### ì¥ê¸° ë¸Œëœì¹˜ (Long-running)
```
main                    # í”„ë¡œë•ì…˜ ë°°í¬ ë¸Œëœì¹˜
â””â”€â”€ í•­ìƒ ì•ˆì •ì ì´ê³  ë°°í¬ ê°€ëŠ¥í•œ ìƒíƒœ
â””â”€â”€ ì§ì ‘ push ê¸ˆì§€
â””â”€â”€ PRì„ í†µí•´ì„œë§Œ ë³‘í•©
```

### ë‹¨ê¸° ë¸Œëœì¹˜ (Short-lived)
```
feature/stage{N}-{description}     # MLOps ë‹¨ê³„ë³„ ê¸°ëŠ¥ ê°œë°œ
â”œâ”€â”€ feature/stage1-data-pipeline
â”œâ”€â”€ feature/stage2-feature-store
â””â”€â”€ feature/stage3-version-control

bugfix/{issue}-{description}       # ë²„ê·¸ ìˆ˜ì •
â”œâ”€â”€ bugfix/123-memory-leak
â””â”€â”€ bugfix/456-api-timeout

hotfix/{issue}-{description}       # ê¸´ê¸‰ ìˆ˜ì •
â”œâ”€â”€ hotfix/789-security-patch
â””â”€â”€ hotfix/101-data-corruption

experiment/{description}           # ì‹¤í—˜ì  ê°œë°œ
â”œâ”€â”€ experiment/new-ml-algorithm
â””â”€â”€ experiment/performance-optimization
```

## ğŸ”„ ê°œë°œ í”„ë¡œì„¸ìŠ¤

### 1. ìƒˆ ê¸°ëŠ¥ ê°œë°œ
```bash
# 1. mainì—ì„œ ìµœì‹  ìƒíƒœë¡œ ì‹œì‘
git checkout main
git pull origin main

# 2. ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„±
git checkout -b feature/stage3-git-workflow

# 3. ê°œë°œ ì‘ì—…
# ... ì½”ë”© ...

# 4. ì •ê¸°ì  ì»¤ë°‹
git add .
git commit -m "feat(stage3): implement git workflow automation"

# 5. ì›ê²© í‘¸ì‹œ
git push origin feature/stage3-git-workflow

# 6. Pull Request ìƒì„±
```

### 2. ì½”ë“œ ë¦¬ë·° ë° ë³‘í•©
```bash
# 1. PR ìƒì„± í›„ ë¦¬ë·°ì–´ ì§€ì •
# 2. CI/CD ê²€ì‚¬ í†µê³¼ í™•ì¸
# 3. ì½”ë“œ ë¦¬ë·° ì™„ë£Œ
# 4. Squash and Mergeë¡œ ë³‘í•©
# 5. ë¸Œëœì¹˜ ìë™ ì‚­ì œ
```

## ğŸ“ í’ˆì§ˆ ê´€ë¦¬

### ìë™í™”ëœ ê²€ì‚¬
- **Pre-commit hooks**: ì»¤ë°‹ ì „ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
- **CI/CD íŒŒì´í”„ë¼ì¸**: ìë™ í…ŒìŠ¤íŠ¸ ë° ë°°í¬
- **ì½”ë“œ ë¦¬ë·°**: í•„ìˆ˜ ë¦¬ë·°ì–´ ìŠ¹ì¸
- **ë¸Œëœì¹˜ ë³´í˜¸**: main ë¸Œëœì¹˜ ì§ì ‘ push ê¸ˆì§€

### ìˆ˜ë™ ê²€ì‚¬
- **ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸**: ìƒˆ ê¸°ëŠ¥ì˜ ë™ì‘ í™•ì¸
- **í†µí•© í…ŒìŠ¤íŠ¸**: ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í™•ì¸
- **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: README ë° ê°€ì´ë“œ ì—…ë°ì´íŠ¸
EOF

echo "ğŸ“‹ ì›Œí¬í”Œë¡œìš° ì „ëµ ë¬¸ì„œ ìƒì„± ì™„ë£Œ"
```

---

## ğŸ¯ 2. ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™ ì„¤ì •

### 2.1 MLOps íŠ¹í™” ë¸Œëœì¹˜ ë„¤ì´ë° ì»¨ë²¤ì…˜

```bash
# ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
cat > scripts/validate_branch_name.sh << 'EOF'
#!/bin/bash
# MLOps í”„ë¡œì íŠ¸ ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™ ê²€ì¦

BRANCH_NAME=$1

# MLOps 9ë‹¨ê³„ íŒ¨í„´
STAGE_PATTERN="^feature/stage[1-9]-[a-z0-9-]+$"
BUGFIX_PATTERN="^bugfix/[0-9]+-[a-z0-9-]+$"
HOTFIX_PATTERN="^hotfix/[0-9]+-[a-z0-9-]+$"
EXPERIMENT_PATTERN="^experiment/[a-z0-9-]+$"
DOCS_PATTERN="^docs/[a-z0-9-]+$"

if [[ $BRANCH_NAME =~ $STAGE_PATTERN ]] || \
   [[ $BRANCH_NAME =~ $BUGFIX_PATTERN ]] || \
   [[ $BRANCH_NAME =~ $HOTFIX_PATTERN ]] || \
   [[ $BRANCH_NAME =~ $EXPERIMENT_PATTERN ]] || \
   [[ $BRANCH_NAME =~ $DOCS_PATTERN ]]; then
    echo "âœ… ë¸Œëœì¹˜ëª…ì´ MLOps ê·œì¹™ì— ë§ìŠµë‹ˆë‹¤: $BRANCH_NAME"
    exit 0
else
    echo "âŒ ë¸Œëœì¹˜ëª…ì´ ê·œì¹™ì— ë§ì§€ ì•ŠìŠµë‹ˆë‹¤: $BRANCH_NAME"
    echo ""
    echo "ğŸ“‹ ì˜¬ë°”ë¥¸ ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™:"
    echo "  ğŸ”¹ MLOps ë‹¨ê³„ë³„ ê¸°ëŠ¥:"
    echo "    feature/stage1-data-pipeline"
    echo "    feature/stage2-feature-store"
    echo "    feature/stage3-version-control"
    echo ""
    echo "  ğŸ”¹ ë²„ê·¸ ìˆ˜ì •:"
    echo "    bugfix/123-memory-leak-fix"
    echo "    bugfix/456-api-timeout-issue"
    echo ""
    echo "  ğŸ”¹ ê¸´ê¸‰ ìˆ˜ì •:"
    echo "    hotfix/789-security-vulnerability"
    echo "    hotfix/101-data-corruption-fix"
    echo ""
    echo "  ğŸ”¹ ì‹¤í—˜ì  ê°œë°œ:"
    echo "    experiment/new-ml-algorithm"
    echo "    experiment/performance-optimization"
    echo ""
    echo "  ğŸ”¹ ë¬¸ì„œí™”:"
    echo "    docs/api-documentation"
    echo "    docs/deployment-guide"
    exit 1
fi
EOF

chmod +x scripts/validate_branch_name.sh

echo "ğŸ·ï¸ ë¸Œëœì¹˜ ë„¤ì´ë° ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì™„ë£Œ"
```

### 2.2 ìë™í™”ëœ ë¸Œëœì¹˜ ìƒì„± ë„êµ¬

```bash
# MLOps ë¸Œëœì¹˜ ìƒì„± ìë™í™” ë„êµ¬
cat > scripts/create_mlops_branch.py << 'EOF'
#!/usr/bin/env python3
"""
MLOps í”„ë¡œì íŠ¸ ë¸Œëœì¹˜ ìƒì„± ìë™í™” ë„êµ¬
"""
import subprocess
import sys
import argparse
from datetime import datetime

class MLOpsBranchCreator:
    """MLOps ë¸Œëœì¹˜ ìƒì„± í´ë˜ìŠ¤"""
    
    def __init__(self):
        self.current_branch = self._get_current_branch()
    
    def _run_git_command(self, cmd: list):
        """Git ëª…ë ¹ì–´ ì‹¤í–‰"""
        try:
            result = subprocess.run(
                ['git'] + cmd,
                capture_output=True,
                text=True,
                check=True
            )
            return result.stdout.strip()
        except subprocess.CalledProcessError as e:
            print(f"âŒ Git ëª…ë ¹ì–´ ì‹¤í–‰ ì‹¤íŒ¨: {' '.join(cmd)}")
            print(f"   ì˜¤ë¥˜: {e.stderr}")
            sys.exit(1)
    
    def _get_current_branch(self) -> str:
        """í˜„ì¬ ë¸Œëœì¹˜ ê°€ì ¸ì˜¤ê¸°"""
        return self._run_git_command(['branch', '--show-current'])
    
    def create_stage_branch(self, stage: int, description: str) -> str:
        """MLOps ë‹¨ê³„ë³„ ë¸Œëœì¹˜ ìƒì„±"""
        if not 1 <= stage <= 9:
            raise ValueError("ë‹¨ê³„ëŠ” 1-9 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.")
        
        # ì„¤ëª…ì„ kebab-caseë¡œ ë³€í™˜
        description = description.lower().replace('_', '-').replace(' ', '-')
        branch_name = f"feature/stage{stage}-{description}"
        
        print(f"ğŸš€ MLOps {stage}ë‹¨ê³„ ë¸Œëœì¹˜ ìƒì„±: {branch_name}")
        
        # mainì—ì„œ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸
        print("ğŸ“¥ main ë¸Œëœì¹˜ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸...")
        self._run_git_command(['checkout', 'main'])
        self._run_git_command(['pull', 'origin', 'main'])
        
        # ë¸Œëœì¹˜ ìƒì„± ë° ì²´í¬ì•„ì›ƒ
        print(f"ğŸŒ¿ ë¸Œëœì¹˜ ìƒì„± ë° ì²´í¬ì•„ì›ƒ: {branch_name}")
        self._run_git_command(['checkout', '-b', branch_name])
        
        # ë‹¨ê³„ë³„ ë””ë ‰í„°ë¦¬ êµ¬ì¡° ìƒì„±
        stage_dir = f"docs/{stage:02d}-{description.replace('-', '_')}"
        impl_dir = f"{stage_dir}/implementation"
        
        import os
        os.makedirs(impl_dir, exist_ok=True)
        
        # ê¸°ë³¸ README ìƒì„±
        readme_content = f"""# {stage}ë‹¨ê³„: {description.replace('-', ' ').title()}

## ğŸ“‹ ê°œìš”

**ëª©í‘œ**: MLOps {stage}ë‹¨ê³„ êµ¬í˜„
**ë¸Œëœì¹˜**: {branch_name}
**ìƒì„±ì¼**: {datetime.now().strftime('%Y-%m-%d')}

## ğŸ¯ êµ¬í˜„ ê³„íš

### ì£¼ìš” ê¸°ëŠ¥
- [ ] ê¸°ëŠ¥ 1
- [ ] ê¸°ëŠ¥ 2
- [ ] ê¸°ëŠ¥ 3

### ì™„ë£Œ ê¸°ì¤€
- [ ] ê¸°ëŠ¥ì  ì™„ë£Œ
- [ ] í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ë¬¸ì„œí™” ì™„ë£Œ

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [ì „ì²´ ì•„í‚¤í…ì²˜](../00-overview/0.mlops-architecture-complete-9stages.md)
- [êµ¬í˜„ ë¡œë“œë§µ](../00-overview/7.mlops-9-stages-implementation-roadmap.md)
"""
        
        with open(f"{stage_dir}/README.md", 'w', encoding='utf-8') as f:
            f.write(readme_content)
        
        print(f"âœ… {stage}ë‹¨ê³„ ê°œë°œ í™˜ê²½ ì„¤ì • ì™„ë£Œ")
        print(f"ğŸ“ ì‘ì—… ë””ë ‰í„°ë¦¬: {stage_dir}")
        print(f"ğŸ’¡ êµ¬í˜„ ë””ë ‰í„°ë¦¬: {impl_dir}")
        
        return branch_name
    
    def create_bugfix_branch(self, issue_number: str, description: str) -> str:
        """ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜ ìƒì„±"""
        description = description.lower().replace('_', '-').replace(' ', '-')
        branch_name = f"bugfix/{issue_number}-{description}"
        
        print(f"ğŸ› ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜ ìƒì„±: {branch_name}")
        
        # mainì—ì„œ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸
        self._run_git_command(['checkout', 'main'])
        self._run_git_command(['pull', 'origin', 'main'])
        
        # ë¸Œëœì¹˜ ìƒì„±
        self._run_git_command(['checkout', '-b', branch_name])
        
        print(f"âœ… ë²„ê·¸ ìˆ˜ì • í™˜ê²½ ì¤€ë¹„ ì™„ë£Œ")
        return branch_name
    
    def create_experiment_branch(self, description: str) -> str:
        """ì‹¤í—˜ ë¸Œëœì¹˜ ìƒì„±"""
        description = description.lower().replace('_', '-').replace(' ', '-')
        branch_name = f"experiment/{description}"
        
        print(f"ğŸ§ª ì‹¤í—˜ ë¸Œëœì¹˜ ìƒì„±: {branch_name}")
        
        # mainì—ì„œ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸
        self._run_git_command(['checkout', 'main'])
        self._run_git_command(['pull', 'origin', 'main'])
        
        # ë¸Œëœì¹˜ ìƒì„±
        self._run_git_command(['checkout', '-b', branch_name])
        
        # ì‹¤í—˜ ë””ë ‰í„°ë¦¬ ìƒì„±
        exp_dir = f"experiments/{description}"
        import os
        os.makedirs(exp_dir, exist_ok=True)
        
        print(f"âœ… ì‹¤í—˜ í™˜ê²½ ì¤€ë¹„ ì™„ë£Œ")
        print(f"ğŸ“ ì‹¤í—˜ ë””ë ‰í„°ë¦¬: {exp_dir}")
        
        return branch_name

def main():
    parser = argparse.ArgumentParser(description="MLOps ë¸Œëœì¹˜ ìƒì„± ë„êµ¬")
    subparsers = parser.add_subparsers(dest='command', help='ë¸Œëœì¹˜ íƒ€ì…')
    
    # ë‹¨ê³„ë³„ ê¸°ëŠ¥ ë¸Œëœì¹˜
    stage_parser = subparsers.add_parser('stage', help='MLOps ë‹¨ê³„ë³„ ê¸°ëŠ¥ ë¸Œëœì¹˜')
    stage_parser.add_argument('stage_number', type=int, help='ë‹¨ê³„ ë²ˆí˜¸ (1-9)')
    stage_parser.add_argument('description', help='ê¸°ëŠ¥ ì„¤ëª…')
    
    # ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜
    bugfix_parser = subparsers.add_parser('bugfix', help='ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜')
    bugfix_parser.add_argument('issue_number', help='ì´ìŠˆ ë²ˆí˜¸')
    bugfix_parser.add_argument('description', help='ë²„ê·¸ ì„¤ëª…')
    
    # ì‹¤í—˜ ë¸Œëœì¹˜
    exp_parser = subparsers.add_parser('experiment', help='ì‹¤í—˜ ë¸Œëœì¹˜')
    exp_parser.add_argument('description', help='ì‹¤í—˜ ì„¤ëª…')
    
    args = parser.parse_args()
    
    if not args.command:
        parser.print_help()
        return
    
    creator = MLOpsBranchCreator()
    
    if args.command == 'stage':
        creator.create_stage_branch(args.stage_number, args.description)
    elif args.command == 'bugfix':
        creator.create_bugfix_branch(args.issue_number, args.description)
    elif args.command == 'experiment':
        creator.create_experiment_branch(args.description)

if __name__ == "__main__":
    main()
EOF

chmod +x scripts/create_mlops_branch.py

echo "ğŸ¤– MLOps ë¸Œëœì¹˜ ìƒì„± ìë™í™” ë„êµ¬ ì™„ë£Œ"
```

---

## ğŸ¯ 3. ì›Œí¬í”Œë¡œìš° ë³´í˜¸ ê·œì¹™ ì„¤ì •

### 3.1 main ë¸Œëœì¹˜ ë³´í˜¸ ì •ì±…

```bash
# GitHub ë¸Œëœì¹˜ ë³´í˜¸ ì„¤ì • ê°€ì´ë“œ
cat > .github/BRANCH_PROTECTION_SETUP.md << 'EOF'
# GitHub ë¸Œëœì¹˜ ë³´í˜¸ ê·œì¹™ ì„¤ì •

## ğŸ›¡ï¸ main ë¸Œëœì¹˜ ë³´í˜¸ ì„¤ì •

GitHub ì›¹ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ë‹¤ìŒ ì„¤ì •ì„ ì ìš©í•˜ì„¸ìš”:

### Settings > Branches > Add rule

#### 1. Branch name pattern
```
main
```

#### 2. Protect matching branches ì„¤ì •

**Require a pull request before merging**
- [x] Required approvals: 1
- [x] Dismiss stale PR approvals when new commits are pushed
- [x] Require review from code owners

**Require status checks to pass before merging**
- [x] Require branches to be up to date before merging
- Required status checks:
  - [ ] continuous-integration
  - [ ] pre-commit-check
  - [ ] code-quality-check
  - [ ] mlops-validation

**Restrict pushes that create files**
- [x] Restrict pushes
- [x] Include administrators

**Other restrictions**
- [x] Allow force pushes: âŒ (ë¹„í™œì„±í™”)
- [x] Allow deletions: âŒ (ë¹„í™œì„±í™”)

## ğŸ”§ ë¡œì»¬ ë³´í˜¸ ì„¤ì •

### Pre-push Hook ì„¤ì •
```bash
#!/bin/bash
# .git/hooks/pre-push

protected_branch='main'
current_branch=$(git symbolic-ref HEAD | sed -e 's,.*/\(.*\),\1,')

if [ $protected_branch = $current_branch ]; then
    echo "âŒ main ë¸Œëœì¹˜ì— ì§ì ‘ í‘¸ì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
    echo ""
    echo "ğŸ”„ ì˜¬ë°”ë¥¸ ì›Œí¬í”Œë¡œìš°:"
    echo "  1. ë¸Œëœì¹˜ ìƒì„±: python scripts/create_mlops_branch.py stage 3 git-workflow"
    echo "  2. ì‘ì—… ì™„ë£Œ í›„ í‘¸ì‹œ: git push origin feature/stage3-git-workflow"
    echo "  3. GitHubì—ì„œ Pull Request ìƒì„±"
    echo "  4. ì½”ë“œ ë¦¬ë·° ë° ìŠ¹ì¸ í›„ ë³‘í•©"
    exit 1
fi

# ë¸Œëœì¹˜ëª… ê²€ì¦
./scripts/validate_branch_name.sh $current_branch
```
EOF

# Pre-push hook ì„¤ì¹˜
cat > .git/hooks/pre-push << 'EOF'
#!/bin/bash
# MLOps í”„ë¡œì íŠ¸ Pre-push Hook

protected_branch='main'
current_branch=$(git symbolic-ref HEAD | sed -e 's,.*/\(.*\),\1,')

if [ $protected_branch = $current_branch ]; then
    echo "âŒ main ë¸Œëœì¹˜ì— ì§ì ‘ í‘¸ì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
    echo ""
    echo "ğŸ”„ MLOps ì›Œí¬í”Œë¡œìš°ë¥¼ ë”°ë¼ì£¼ì„¸ìš”:"
    echo "  1. ë‹¨ê³„ë³„ ë¸Œëœì¹˜ ìƒì„±:"
    echo "     python scripts/create_mlops_branch.py stage <N> <description>"
    echo "  2. ì‘ì—… í›„ í‘¸ì‹œ:"
    echo "     git push origin feature/stage<N>-<description>"
    echo "  3. GitHubì—ì„œ Pull Request ìƒì„±"
    echo "  4. ì½”ë“œ ë¦¬ë·° ì™„ë£Œ í›„ ë³‘í•©"
    exit 1
fi

# ë¸Œëœì¹˜ëª… ê²€ì¦
if [ -f "scripts/validate_branch_name.sh" ]; then
    ./scripts/validate_branch_name.sh $current_branch
fi

echo "âœ… ì›Œí¬í”Œë¡œìš° ê·œì¹™ ê²€ì¦ í†µê³¼: $current_branch"
EOF

chmod +x .git/hooks/pre-push

echo "ğŸ›¡ï¸ ë¸Œëœì¹˜ ë³´í˜¸ ì„¤ì • ì™„ë£Œ"
```

---

## ğŸ¯ 4. Docker í™˜ê²½ ì›Œí¬í”Œë¡œìš° í†µí•©

### 4.1 Docker Composeì— Git ì›Œí¬í”Œë¡œìš° ì§€ì› ì¶”ê°€

```bash
# docker-compose.ymlì— Git ì›Œí¬í”Œë¡œìš° ì„œë¹„ìŠ¤ ì¶”ê°€
cat > docker-compose.git-workflow.yml << 'EOF'
version: '3.8'

services:
  git-workflow:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: movie-mlops-git-workflow
    volumes:
      - .:/workspace
      - ~/.ssh:/root/.ssh:ro
      - ~/.gitconfig:/root/.gitconfig:ro
    working_dir: /workspace
    environment:
      - PYTHONPATH=/workspace
      - GIT_AUTHOR_NAME=${GIT_AUTHOR_NAME:-MLOps Developer}
      - GIT_AUTHOR_EMAIL=${GIT_AUTHOR_EMAIL:-dev@mlops.local}
    command: |
      bash -c "
        echo 'ğŸ”§ MLOps Git ì›Œí¬í”Œë¡œìš° ë„êµ¬'
        echo ''
        echo 'ğŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´:'
        echo '  ë¸Œëœì¹˜ ìƒì„±:'
        echo '    python scripts/create_mlops_branch.py stage 4 cicd-pipeline'
        echo '    python scripts/create_mlops_branch.py bugfix 123 memory-leak'
        echo '    python scripts/create_mlops_branch.py experiment new-algorithm'
        echo ''
        echo '  ë¸Œëœì¹˜ ê²€ì¦:'
        echo '    ./scripts/validate_branch_name.sh feature/stage3-git-workflow'
        echo ''
        echo '  Git ìƒíƒœ:'
        echo '    git status'
        echo '    git branch -a'
        echo ''
        echo 'ğŸŒ¿ í˜„ì¬ ë¸Œëœì¹˜: \$(git branch --show-current)'
        echo 'ğŸ“ ì‘ì—… ë””ë ‰í„°ë¦¬: /workspace'
        echo ''
        tail -f /dev/null
      "
    networks:
      - mlops-network

networks:
  mlops-network:
    external: true
EOF

echo "ğŸ³ Docker Compose Git ì›Œí¬í”Œë¡œìš° ì„œë¹„ìŠ¤ ìƒì„± ì™„ë£Œ"
```

### 4.2 WSL í™˜ê²½ ìµœì í™”

```bash
# WSL Git í™˜ê²½ ìµœì í™” ìŠ¤í¬ë¦½íŠ¸
cat > scripts/setup_wsl_git_env.sh << 'EOF'
#!/bin/bash
# WSL Git í™˜ê²½ ìµœì í™”

echo "ğŸ”§ WSL Git í™˜ê²½ ìµœì í™” ì‹œì‘..."

# Git ì„¤ì • ìµœì í™”
echo "âš™ï¸ Git ì„¤ì • ìµœì í™”..."
git config --global core.autocrlf false
git config --global core.filemode false
git config --global core.ignorecase false
git config --global pull.rebase false
git config --global push.default simple

# Git ë³„ì¹­ ì„¤ì •
echo "ğŸ”— Git ë³„ì¹­ ì„¤ì •..."
git config --global alias.st status
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.cm commit
git config --global alias.lg "log --graph --oneline --all --decorate"
git config --global alias.last "log -1 HEAD"
git config --global alias.unstage "reset HEAD --"

# MLOps íŠ¹í™” ë³„ì¹­
git config --global alias.mlops-stage "!f() { python scripts/create_mlops_branch.py stage \$1 \$2; }; f"
git config --global alias.mlops-bugfix "!f() { python scripts/create_mlops_branch.py bugfix \$1 \$2; }; f"
git config --global alias.mlops-exp "!f() { python scripts/create_mlops_branch.py experiment \$1; }; f"

# ì„±ëŠ¥ ìµœì í™”
echo "âš¡ ì„±ëŠ¥ ìµœì í™”..."
git config --global core.preloadindex true
git config --global core.fscache true
git config --global gc.auto 256

# ì‚¬ìš©ì ì •ë³´ í™•ì¸
echo "ğŸ‘¤ Git ì‚¬ìš©ì ì •ë³´:"
git config --global user.name || echo "  âš ï¸  user.nameì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
git config --global user.email || echo "  âš ï¸  user.emailì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."

echo ""
echo "âœ… WSL Git í™˜ê²½ ìµœì í™” ì™„ë£Œ!"
echo ""
echo "ğŸ¯ MLOps Git ëª…ë ¹ì–´ ì‚¬ìš©ë²•:"
echo "  git mlops-stage 3 git-workflow    # 3ë‹¨ê³„ ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„±"
echo "  git mlops-bugfix 123 memory-leak  # ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜ ìƒì„±"
echo "  git mlops-exp new-algorithm       # ì‹¤í—˜ ë¸Œëœì¹˜ ìƒì„±"
EOF

chmod +x scripts/setup_wsl_git_env.sh

echo "âš™ï¸ WSL Git í™˜ê²½ ìµœì í™” ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì™„ë£Œ"
```

---

## ğŸ¯ 5. ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

### 5.1 ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

```bash
# Git ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
cat > scripts/test_git_workflow.py << 'EOF'
#!/usr/bin/env python3
"""
Git ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
"""
import subprocess
import sys
import tempfile
import os
from pathlib import Path

class GitWorkflowTester:
    """Git ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤"""
    
    def __init__(self):
        self.original_branch = self._get_current_branch()
        self.test_branches = []
    
    def _run_command(self, cmd: list, check: bool = True):
        """ëª…ë ¹ì–´ ì‹¤í–‰"""
        try:
            result = subprocess.run(cmd, capture_output=True, text=True, check=check)
            return result
        except subprocess.CalledProcessError as e:
            if check:
                print(f"âŒ ëª…ë ¹ì–´ ì‹¤í–‰ ì‹¤íŒ¨: {' '.join(cmd)}")
                print(f"   ì˜¤ë¥˜: {e.stderr}")
            return e
    
    def _get_current_branch(self) -> str:
        """í˜„ì¬ ë¸Œëœì¹˜ ê°€ì ¸ì˜¤ê¸°"""
        result = self._run_command(['git', 'branch', '--show-current'])
        return result.stdout.strip()
    
    def test_branch_naming_validation(self) -> bool:
        """ë¸Œëœì¹˜ ë„¤ì´ë° ê²€ì¦ í…ŒìŠ¤íŠ¸"""
        print("ğŸ§ª ë¸Œëœì¹˜ ë„¤ì´ë° ê²€ì¦ í…ŒìŠ¤íŠ¸...")
        
        # ì˜¬ë°”ë¥¸ ë¸Œëœì¹˜ëª…ë“¤
        valid_names = [
            "feature/stage1-data-pipeline",
            "feature/stage9-event-driven",
            "bugfix/123-memory-leak",
            "hotfix/456-security-patch",
            "experiment/new-algorithm",
            "docs/api-documentation"
        ]
        
        # ì˜ëª»ëœ ë¸Œëœì¹˜ëª…ë“¤
        invalid_names = [
            "Feature/Stage1-DataPipeline",  # ëŒ€ë¬¸ì
            "feature/stage10-invalid",      # ì˜ëª»ëœ ë‹¨ê³„
            "random-branch",               # íƒ€ì… ì—†ìŒ
            "feature/stage1",              # ì„¤ëª… ì—†ìŒ
            "main",                        # ë³´í˜¸ëœ ë¸Œëœì¹˜ëª…
        ]
        
        all_passed = True
        
        for name in valid_names:
            result = self._run_command(['./scripts/validate_branch_name.sh', name], check=False)
            if result.returncode == 0:
                print(f"  âœ… {name}")
            else:
                print(f"  âŒ {name} - ìœ íš¨í•œ ì´ë¦„ì´ì§€ë§Œ ì‹¤íŒ¨")
                all_passed = False
        
        for name in invalid_names:
            result = self._run_command(['./scripts/validate_branch_name.sh', name], check=False)
            if result.returncode != 0:
                print(f"  âœ… {name} - ì˜¬ë°”ë¥´ê²Œ ê±°ë¶€ë¨")
            else:
                print(f"  âŒ {name} - ì˜ëª»ëœ ì´ë¦„ì´ì§€ë§Œ í†µê³¼")
                all_passed = False
        
        return all_passed
    
    def test_branch_creation_tool(self) -> bool:
        """ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ í…ŒìŠ¤íŠ¸"""
        print("\nğŸ§ª ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ í…ŒìŠ¤íŠ¸...")
        
        try:
            # í…ŒìŠ¤íŠ¸ ë¸Œëœì¹˜ ìƒì„±
            test_branch = "feature/stage1-test-feature"
            
            # ë¸Œëœì¹˜ ìƒì„± (ì‹¤ì œë¡œëŠ” ìƒì„±í•˜ì§€ ì•Šê³  dry-run)
            print(f"  ğŸ“ ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ ì‹¤í–‰ ê°€ëŠ¥ì„± í™•ì¸...")
            
            # Python ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ ê°€ëŠ¥í•œì§€ í™•ì¸
            result = self._run_command(['python', 'scripts/create_mlops_branch.py', '--help'], check=False)
            
            if result.returncode == 0:
                print(f"  âœ… ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ ì‹¤í–‰ ê°€ëŠ¥")
                return True
            else:
                print(f"  âŒ ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ ì‹¤í–‰ ë¶ˆê°€")
                return False
                
        except Exception as e:
            print(f"  âŒ ë¸Œëœì¹˜ ìƒì„± í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: {e}")
            return False
    
    def test_pre_push_hook(self) -> bool:
        """Pre-push hook í…ŒìŠ¤íŠ¸"""
        print("\nğŸ§ª Pre-push hook í…ŒìŠ¤íŠ¸...")
        
        try:
            # Pre-push hook íŒŒì¼ ì¡´ì¬ í™•ì¸
            hook_file = Path('.git/hooks/pre-push')
            if hook_file.exists() and os.access(hook_file, os.X_OK):
                print(f"  âœ… Pre-push hook ì„¤ì¹˜ë¨")
                return True
            else:
                print(f"  âŒ Pre-push hook ì—†ìŒ ë˜ëŠ” ì‹¤í–‰ ê¶Œí•œ ì—†ìŒ")
                return False
                
        except Exception as e:
            print(f"  âŒ Pre-push hook í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: {e}")
            return False
    
    def test_workflow_documentation(self) -> bool:
        """ì›Œí¬í”Œë¡œìš° ë¬¸ì„œ í…ŒìŠ¤íŠ¸"""
        print("\nğŸ§ª ì›Œí¬í”Œë¡œìš° ë¬¸ì„œ í…ŒìŠ¤íŠ¸...")
        
        required_files = [
            '.github/workflows/WORKFLOW_STRATEGY.md',
            '.github/BRANCH_PROTECTION_SETUP.md',
            'scripts/validate_branch_name.sh',
            'scripts/create_mlops_branch.py'
        ]
        
        all_exist = True
        for file_path in required_files:
            if Path(file_path).exists():
                print(f"  âœ… {file_path}")
            else:
                print(f"  âŒ {file_path} - íŒŒì¼ ì—†ìŒ")
                all_exist = False
        
        return all_exist
    
    def run_all_tests(self) -> bool:
        """ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰"""
        print("ğŸš€ Git ì›Œí¬í”Œë¡œìš° ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹œì‘...\n")
        
        tests = [
            ("ë¸Œëœì¹˜ ë„¤ì´ë° ê²€ì¦", self.test_branch_naming_validation),
            ("ë¸Œëœì¹˜ ìƒì„± ë„êµ¬", self.test_branch_creation_tool),
            ("Pre-push Hook", self.test_pre_push_hook),
            ("ì›Œí¬í”Œë¡œìš° ë¬¸ì„œ", self.test_workflow_documentation),
        ]
        
        passed_tests = 0
        total_tests = len(tests)
        
        for test_name, test_func in tests:
            try:
                if test_func():
                    passed_tests += 1
                print()  # ë¹ˆ ì¤„ ì¶”ê°€
            except Exception as e:
                print(f"âŒ {test_name} í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\n")
        
        # ê²°ê³¼ ìš”ì•½
        print("ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½:")
        print(f"  ì „ì²´ í…ŒìŠ¤íŠ¸: {total_tests}")
        print(f"  í†µê³¼í•œ í…ŒìŠ¤íŠ¸: {passed_tests}")
        print(f"  ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸: {total_tests - passed_tests}")
        print(f"  ì„±ê³µë¥ : {(passed_tests / total_tests * 100):.1f}%")
        
        if passed_tests == total_tests:
            print("\nğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤!")
            return True
        else:
            print(f"\nâš ï¸ {total_tests - passed_tests}ê°œ í…ŒìŠ¤íŠ¸ì—ì„œ ë¬¸ì œê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
            return False

def main():
    tester = GitWorkflowTester()
    success = tester.run_all_tests()
    sys.exit(0 if success else 1)

if __name__ == "__main__":
    main()
EOF

chmod +x scripts/test_git_workflow.py

echo "ğŸ§ª Git ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì™„ë£Œ"
```

### 5.2 ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# Git ì›Œí¬í”Œë¡œìš° ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "ğŸ” Git ì›Œí¬í”Œë¡œìš° ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì‹œì‘..."

# 1. WSL í™˜ê²½ ì„¤ì •
if [ -f "scripts/setup_wsl_git_env.sh" ]; then
    echo "1. WSL Git í™˜ê²½ ì„¤ì •..."
    bash scripts/setup_wsl_git_env.sh
fi

# 2. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ í™•ì¸
echo "2. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ í™•ì¸..."
chmod +x scripts/validate_branch_name.sh
chmod +x scripts/create_mlops_branch.py
chmod +x scripts/test_git_workflow.py

# 3. ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "3. ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰..."
python scripts/test_git_workflow.py

echo ""
echo "âœ… 3.1 Git ì›Œí¬í”Œë¡œìš° ì „ëµ ì„¤ì • ì™„ë£Œ!"
echo ""
echo "ğŸ“ ë‹¤ìŒ ì‚¬ìš©ë²•:"
echo "  ğŸŒ¿ ë¸Œëœì¹˜ ìƒì„±: python scripts/create_mlops_branch.py stage 4 cicd-pipeline"
echo "  ğŸ” ë¸Œëœì¹˜ ê²€ì¦: ./scripts/validate_branch_name.sh feature/stage4-cicd-pipeline"
echo "  ğŸ³ Docker í™˜ê²½: docker-compose -f docker-compose.git-workflow.yml up -d"
```

---

## âœ… ì™„ë£Œ ê¸°ì¤€

### ê¸°ëŠ¥ì  ì™„ë£Œ ê¸°ì¤€
- [ ] GitHub Flow ê¸°ë°˜ ì›Œí¬í”Œë¡œìš° ì „ëµ ìˆ˜ë¦½
- [ ] MLOps íŠ¹í™” ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™ ì •ì˜
- [ ] ìë™í™”ëœ ë¸Œëœì¹˜ ìƒì„± ë„êµ¬ êµ¬í˜„
- [ ] main ë¸Œëœì¹˜ ë³´í˜¸ ì •ì±… ì„¤ì •
- [ ] ì›Œí¬í”Œë¡œìš° ê²€ì¦ ì‹œìŠ¤í…œ êµ¬ì¶•

### ê¸°ìˆ ì  ì™„ë£Œ ê¸°ì¤€
- [ ] WSL + Docker í™˜ê²½ì— ìµœì í™”
- [ ] ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ ê°€ëŠ¥í•˜ê³  ì˜¤ë¥˜ ì—†ìŒ
- [ ] Git hooksë¥¼ í†µí•œ ìë™ ê²€ì¦
- [ ] Requirements íŒŒì¼ ê¸°ë°˜ ë„êµ¬ ì„¤ì¹˜
- [ ] ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ êµ¬ì¶•

### í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ ê¸°ì¤€
- [ ] íŒ€ ì›Œí¬í”Œë¡œìš° í‘œì¤€í™” ë¬¸ì„œ ì‘ì„±
- [ ] MLOps 9ë‹¨ê³„ì— ë§ëŠ” ë¸Œëœì¹˜ ì „ëµ
- [ ] ê°œë°œì ê²½í—˜ ìµœì í™” (DX)
- [ ] ìë™í™”ë¥¼ í†µí•œ íš¨ìœ¨ì„± í–¥ìƒ
- [ ] í’ˆì§ˆ ë³´ì¥ ì‹œìŠ¤í…œ êµ¬ì¶•

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

3.1 Git ì›Œí¬í”Œë¡œìš° ì „ëµ ì„¤ì •ì´ ì™„ë£Œë˜ë©´:

1. **3.2 ë¸Œëœì¹˜ ì „ëµ êµ¬ì„±**: ìƒì„¸ ë¸Œëœì¹˜ ê´€ë¦¬ ì „ëµ
2. **3.3 ì»¤ë°‹ ì»¨ë²¤ì…˜ êµ¬í˜„**: í‘œì¤€í™”ëœ ì»¤ë°‹ ë©”ì‹œì§€
3. **íŒ€ êµìœ¡**: ì›Œí¬í”Œë¡œìš° ì‚¬ìš©ë²• êµìœ¡ ë° ê°€ì´ë“œ ë°°í¬

ì´ì œ MLOps í”„ë¡œì íŠ¸ì— ìµœì í™”ëœ Git ì›Œí¬í”Œë¡œìš° ì „ëµì´ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤!
